<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/uploads/images/gt.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/uploads/images/gt-32.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/uploads/images/gt-16.jpg">
  <link rel="mask-icon" href="/blog/uploads/images/logo.png" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/blog/","images":"/blog/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog/js/config.js"></script>



<link rel="canonical" href="https://github.com/maxzhao-it/blog/post/2921/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://github.com/maxzhao-it/blog/post/2921/","path":"post/2921/","title":"SpringBoot MQ参考资料"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringBoot MQ参考资料 | maxzhao</title>
  





  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/blog/atom.xml" title="maxzhao" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">maxzhao</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">不要害怕Exception和Error</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-schedule"><a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81JMS%E4%BB%8B%E7%BB%8D%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%8F%8A%E5%9F%BA%E7%A1%80%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.</span> <span class="nav-text">一、JMS介绍和使用场景及基础编程模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81ActiveMQ5-x%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">二、ActiveMQ5.x消息队列基础介绍和安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E7%82%B9%EF%BC%9A"><span class="nav-number">2.1.</span> <span class="nav-text">特点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">2.2.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%A2%E6%9D%BF%EF%BC%9A"><span class="nav-number">2.3.</span> <span class="nav-text">面板：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81SpringBoot2%E6%95%B4%E5%90%88ActiveMQ%E5%AE%9E%E6%88%98%E4%B9%8B%E7%82%B9%E5%AF%B9%E7%82%B9%E6%B6%88%E6%81%AF"><span class="nav-number">3.</span> <span class="nav-text">三、SpringBoot2整合ActiveMQ实战之点对点消息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E5%AE%98%E7%BD%91%E5%9C%B0%E5%9D%80"><span class="nav-number">3.1.</span> <span class="nav-text">1、官网地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E5%8A%A0%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="nav-number">3.2.</span> <span class="nav-text">2、加入依赖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81application-properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">3、application.properties配置文件配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%E3%80%81springboot%E5%90%AF%E5%8A%A8%E7%B1%BB-EnableJms%EF%BC%8C%E5%BC%80%E5%90%AF%E6%94%AF%E6%8C%81jms"><span class="nav-number">3.4.</span> <span class="nav-text">4、springboot启动类 @EnableJms，开启支持jms</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E3%80%81%E6%A8%A1%E6%8B%9F%E8%AF%B7%E6%B1%82"><span class="nav-number">3.5.</span> <span class="nav-text">5、模拟请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6%E3%80%81%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%9A%E5%AE%9E%E6%97%B6%E7%9B%91%E5%90%AC%E5%AF%B9%E5%BA%94%E7%9A%84%E9%98%9F%E5%88%97"><span class="nav-number">3.6.</span> <span class="nav-text">6、消费者：实时监听对应的队列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81SpringBoot2%E6%95%B4%E5%90%88ActiveMQ%E5%AE%9E%E6%88%98%E4%B9%8B%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">四、SpringBoot2整合ActiveMQ实战之发布订阅模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E9%9C%80%E8%A6%81%E5%8A%A0%E5%85%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%94%AF%E6%8C%81%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%9E%8B%EF%BC%8C%E9%BB%98%E8%AE%A4%E5%8F%AA%E6%94%AF%E6%8C%81%E7%82%B9%E5%AF%B9%E7%82%B9"><span class="nav-number">4.1.</span> <span class="nav-text">1、需要加入配置文件，支持发布订阅模型，默认只支持点对点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E9%BB%98%E8%AE%A4%E6%B6%88%E8%B4%B9%E8%80%85%E5%B9%B6%E4%B8%8D%E4%BC%9A%E6%B6%88%E8%B4%B9%E8%AE%A2%E9%98%85%E5%8F%91%E5%B8%83%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%B6%88%E6%81%AF%EF%BC%8C%E8%BF%99%E6%98%AF%E7%94%B1%E4%BA%8Espringboot%E9%BB%98%E8%AE%A4%E9%87%87%E7%94%A8%E7%9A%84%E6%98%AFp2p%E6%A8%A1%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%B6%88%E6%81%AF%E7%9A%84%E7%9B%91%E5%90%AC"><span class="nav-number">4.1.1.</span> <span class="nav-text">1、默认消费者并不会消费订阅发布类型的消息，这是由于springboot默认采用的是p2p模式进行消息的监听</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81-JmsListener%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%8C%87%E5%AE%9A%E7%8B%AC%E7%AB%8B%E7%9A%84containerFactory%E7%9A%84%E8%AF%9D%E6%98%AF%E5%8F%AA%E8%83%BD%E6%B6%88%E8%B4%B9queue%E6%B6%88%E6%81%AF"><span class="nav-number">4.1.2.</span> <span class="nav-text">2、@JmsListener如果不指定独立的containerFactory的话是只能消费queue消息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81RocketMQ4-x%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E4%BB%8B%E7%BB%8D"><span class="nav-number">5.</span> <span class="nav-text">五、RocketMQ4.x消息队列介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81RocketMQ4-x%E6%9C%AC%E5%9C%B0%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2"><span class="nav-number">6.</span> <span class="nav-text">六、RocketMQ4.x本地快速部署</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81RoekerMQ4-x%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%AE%B2%E8%A7%A3"><span class="nav-number">7.</span> <span class="nav-text">七、RoekerMQ4.x可视化控制台讲解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81Springboot2%E6%95%B4%E5%90%88RocketMQ4-x%E5%AE%9E%E6%88%98%E4%B8%8A%E9%9B%86"><span class="nav-number">8.</span> <span class="nav-text">八、Springboot2整合RocketMQ4.x实战上集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81Springboot2%E6%95%B4%E5%90%88RocketMQ4-x%E5%AE%9E%E6%88%98%E4%B8%8B%E9%9B%86"><span class="nav-number">9.</span> <span class="nav-text">九、Springboot2整合RocketMQ4.x实战下集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81SpringBoot%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E4%BB%8B%E7%BB%8D%E5%92%8C%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%EF%BC%88%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%EF%BC%89"><span class="nav-number">10.</span> <span class="nav-text">十、SpringBoot多环境配置介绍和项目实战（核心知识）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81SprinBoot2-x%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%AE%80%E4%BB%8B"><span class="nav-number">11.</span> <span class="nav-text">十一、SprinBoot2.x响应式编程简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81SpringBoot2-x%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8Bwebflux%E4%BB%8B%E7%BB%8D"><span class="nav-number">12.</span> <span class="nav-text">十二、SpringBoot2.x响应式编程webflux介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%E3%80%81SpringBoot2-x-webflux%E5%AE%9E%E6%88%98"><span class="nav-number">13.</span> <span class="nav-text">十三、SpringBoot2.x webflux实战</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%8E%A8%E9%80%81%E5%B8%B8%E7%94%A8%E6%8A%80%E6%9C%AF%E4%BB%8B%E7%BB%8D"><span class="nav-number">14.</span> <span class="nav-text">十四、服务端推送常用技术介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E9%AB%98%E7%BA%A7%E7%AF%87%E5%B9%85%E4%B9%8B%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BB%8B%E7%BB%8D%E5%92%8C%E9%83%A8%E7%BD%B2%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%AE%9E%E6%88%98"><span class="nav-number">15.</span> <span class="nav-text">十五、高级篇幅之云服务器介绍和部署生产环境实战</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%85%AD%E3%80%81SpringBoot2-x%E7%9B%91%E6%8E%A7Actuator%E5%AE%9E%E6%88%98%E4%B8%8A%E9%9B%86"><span class="nav-number">16.</span> <span class="nav-text">十六、SpringBoot2.x监控Actuator实战上集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%83%E3%80%81SpringBoot2%E7%9B%91%E6%8E%A7Actuator%E4%B8%8B%E9%9B%86%E5%8F%8A%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%BB%BA%E8%AE%AE"><span class="nav-number">17.</span> <span class="nav-text">十七、SpringBoot2监控Actuator下集及生产环境建议</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="赵联胜"
      src="/blog/uploads/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">赵联胜</p>
  <div class="site-description" itemprop="description">小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">333</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">138</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">166</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://gitee.com/zhaoliansheng" title="GitHub → https:&#x2F;&#x2F;gitee.com&#x2F;zhaoliansheng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/blog/1441439636@qq.com" title="E-Mail → 1441439636@qq.com"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.jianshu.com/u/e8c426a6007e" title="https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;e8c426a6007e" rel="noopener" target="_blank">我的简书</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/2921/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SpringBoot MQ参考资料 | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot MQ参考资料
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-07-04 14:50:22" itemprop="dateModified" datetime="2022-07-04T14:50:22+08:00">2022-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/SpringBoot/" itemprop="url" rel="index"><span itemprop="name">SpringBoot</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/SpringBoot/MQ/" itemprop="url" rel="index"><span itemprop="name">MQ</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="一、JMS介绍和使用场景及基础编程模型"><a href="#一、JMS介绍和使用场景及基础编程模型" class="headerlink" title="一、JMS介绍和使用场景及基础编程模型"></a>一、JMS介绍和使用场景及基础编程模型</h2><p>  简介：讲解什么是小写队列，JMS的基础知识和使用场景</p>
<ol>
<li><p>什么是JMS: Java消息服务（Java Message Service),Java平台中关于面向消息中间件的接口</p>
</li>
<li><p>JMS是一种与厂商无关的 API，用来访问消息收发系统消息，它类似于JDBC(Java Database Connectivity)。这里，JDBC 是可以用来访问许多不同关系数据库的 API</p>
</li>
<li><p>使用场景：</p>
<ol>
<li>跨平台</li>
<li>多语言</li>
<li>多项目</li>
<li>解耦</li>
<li>分布式事务</li>
<li>流量控制</li>
<li>最终一致性</li>
<li>RPC调用</li>
<li>上下游对接，数据源变动-&gt;通知下属</li>
</ol>
</li>
<li><p>概念</p>
</li>
</ol>
<ul>
<li><p>JMS提供者：Apache ActiveMQ、RabbitMQ、Kafka、Notify、MetaQ、RocketMQ</p>
</li>
<li><p>JMS生产者(Message Producer)</p>
</li>
<li><p>JMS消费者(Message Consumer)</p>
</li>
<li><p>JMS消息</p>
</li>
<li><p>JMS队列</p>
</li>
<li><p>JMS主题</p>
</li>
<li><p>JMS消息通常有两种类型：点对点（Point-to-Point)、发布&#x2F;订阅（Publish&#x2F;Subscribe）</p>
</li>
</ul>
<ol start="5">
<li>编程模型</li>
</ol>
<p> MQ中需要用的一些类</p>
<ul>
<li><p>ConnectionFactory ：连接工厂，JMS 用它创建连接</p>
</li>
<li><p>Connection ：JMS 客户端到JMS Provider 的连接</p>
</li>
<li><p>Session： 一个发送或接收消息的线程</p>
</li>
<li><p>Destination ：消息的目的地;消息发送给谁.</p>
</li>
<li><p>MessageConsumer &#x2F; MessageProducer： 消息接收者，消费者</p>
</li>
</ul>
<h2 id="二、ActiveMQ5-x消息队列基础介绍和安装"><a href="#二、ActiveMQ5-x消息队列基础介绍和安装" class="headerlink" title="二、ActiveMQ5.x消息队列基础介绍和安装"></a>二、ActiveMQ5.x消息队列基础介绍和安装</h2><p>  简介：介绍ActiveMQ5.x消息队列基础特性和本地快速安装</p>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><ul>
<li><p>1）支持来自Java，C，C ++，C＃，Ruby，Perl，Python，PHP的各种跨语言客户端和协议</p>
</li>
<li><p>2）支持许多高级功能，如消息组，虚拟目标，通配符和复合目标</p>
</li>
<li><ol start="3">
<li>完全支持JMS 1.1和J2EE 1.4，支持瞬态，持久，事务和XA消息</li>
</ol>
</li>
<li><ol start="4">
<li>Spring支持，ActiveMQ可以轻松嵌入到Spring应用程序中，并使用Spring的XML配置机制进行配置</li>
</ol>
</li>
<li><ol start="5">
<li>支持在流行的J2EE服务器（如TomEE，Geronimo，JBoss，GlassFish和WebLogic）中进行测试</li>
</ol>
</li>
<li><ol start="6">
<li>使用JDBC和高性能日志支持非常快速的持久化</li>
</ol>
</li>
</ul>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul>
<li><p>下载地址：<a target="_blank" rel="noopener" href="http://activemq.apache.org/activemq-5153-release.html">http://activemq.apache.org/activemq-5153-release.html</a></p>
</li>
<li><p>快速开始：<a target="_blank" rel="noopener" href="http://activemq.apache.org/getting-started.html">http://activemq.apache.org/getting-started.html</a></p>
</li>
<li><p>如果我们是32位的机器，就双击win32目录下的activemq.bat,如果是64位机器，则双击win64目录下的activemq.bat</p>
</li>
<li><p>bin目录里面启动 选择对应的系统版本和位数，activeMQ start 启动</p>
</li>
<li><p>启动后访问路径<a target="_blank" rel="noopener" href="http://127.0.0.1:8161/">http://127.0.0.1:8161/</a></p>
</li>
<li><p>用户名和密码默认都是admin</p>
</li>
<li><p>官方案例集合<a href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples">https://github.com/spring-projects/spring-boot/tree/master/spring-boot-samples</a></p>
</li>
</ul>
<h3 id="面板："><a href="#面板：" class="headerlink" title="面板："></a>面板：</h3><ul>
<li><p>Name：队列名称。</p>
</li>
<li><p>Number Of Pending Messages：等待消费的消息个数。</p>
</li>
<li><p>Number Of Consumers：当前连接的消费者数目</p>
</li>
<li><p>Messages Enqueued：进入队列的消息总个数，包括出队列的和待消费的，这个数量只增不减。</p>
</li>
<li><p>Messages Dequeued：已经消费的消息数量。</p>
</li>
</ul>
<h2 id="三、SpringBoot2整合ActiveMQ实战之点对点消息"><a href="#三、SpringBoot2整合ActiveMQ实战之点对点消息" class="headerlink" title="三、SpringBoot2整合ActiveMQ实战之点对点消息"></a>三、SpringBoot2整合ActiveMQ实战之点对点消息</h2><p>  简介:SpringBoot2.x整合ActiveMQ实战之点对点消息</p>
<h3 id="1、官网地址"><a href="#1、官网地址" class="headerlink" title="1、官网地址"></a>1、<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.2.x-SNAPSHOT/reference/html/#using-boot-starter">官网地址</a></h3><h3 id="2、加入依赖"><a href="#2、加入依赖" class="headerlink" title="2、加入依赖"></a>2、加入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 整合消息队列ActiveMQ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-activemq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 如果配置线程池则加入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.activemq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>activemq-pool<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3、application-properties配置文件配置"><a href="#3、application-properties配置文件配置" class="headerlink" title="3、application.properties配置文件配置"></a>3、application.properties配置文件配置</h3> <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#整合jms测试，安装在别的机器，防火墙和端口号记得开放</span></span><br><span class="line"> <span class="attr">spring.activemq.broker-url</span>=<span class="string">tcp://127.0.0.1:61616</span></span><br><span class="line"><span class="comment"> #集群配置</span></span><br><span class="line"><span class="comment"> #spring.activemq.broker-url=failover:(tcp://localhost:61616,tcp://localhost:61617)</span></span><br><span class="line"> <span class="attr">spring.activemq.user</span>=<span class="string">admin</span></span><br><span class="line"> <span class="attr">spring.activemq.password</span>=<span class="string">admin</span></span><br><span class="line"><span class="comment"> #下列配置要增加依赖</span></span><br><span class="line"> <span class="attr">spring.activemq.pool.enabled</span>=<span class="string">true</span></span><br><span class="line"> <span class="attr">spring.activemq.pool.max-connections</span>=<span class="string">100</span></span><br></pre></td></tr></table></figure>



<h3 id="4、springboot启动类-EnableJms，开启支持jms"><a href="#4、springboot启动类-EnableJms，开启支持jms" class="headerlink" title="4、springboot启动类 @EnableJms，开启支持jms"></a>4、springboot启动类 @EnableJms，开启支持jms</h3><h3 id="5、模拟请求"><a href="#5、模拟请求" class="headerlink" title="5、模拟请求"></a>5、模拟请求</h3><p> localhost:8080&#x2F;api&#x2F;v1&#x2F;order?msg&#x3D;12312321321312</p>
<h3 id="6、消费者：实时监听对应的队列"><a href="#6、消费者：实时监听对应的队列" class="headerlink" title="6、消费者：实时监听对应的队列"></a>6、消费者：实时监听对应的队列</h3><p> @JmsListener(destination &#x3D; “order.queue”)</p>
<h2 id="四、SpringBoot2整合ActiveMQ实战之发布订阅模式"><a href="#四、SpringBoot2整合ActiveMQ实战之发布订阅模式" class="headerlink" title="四、SpringBoot2整合ActiveMQ实战之发布订阅模式"></a>四、SpringBoot2整合ActiveMQ实战之发布订阅模式</h2><p>  简介：SpringBoot整合ActiveMQ实战之发布订阅模式(pub&#x2F;sub),及同时支持点对点和发布订阅模型</p>
<h3 id="1、需要加入配置文件，支持发布订阅模型，默认只支持点对点"><a href="#1、需要加入配置文件，支持发布订阅模型，默认只支持点对点" class="headerlink" title="1、需要加入配置文件，支持发布订阅模型，默认只支持点对点"></a>1、需要加入配置文件，支持发布订阅模型，默认只支持点对点</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#default point to point</span></span><br><span class="line"><span class="attr">spring.jms.pub-sub-domain</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p>  注意点：</p>
<h4 id="1、默认消费者并不会消费订阅发布类型的消息，这是由于springboot默认采用的是p2p模式进行消息的监听"><a href="#1、默认消费者并不会消费订阅发布类型的消息，这是由于springboot默认采用的是p2p模式进行消息的监听" class="headerlink" title="1、默认消费者并不会消费订阅发布类型的消息，这是由于springboot默认采用的是p2p模式进行消息的监听"></a>1、默认消费者并不会消费订阅发布类型的消息，这是由于springboot默认采用的是p2p模式进行消息的监听</h4><p>  修改配置：spring.jms.pub-sub-domain&#x3D;true</p>
<h4 id="2、-JmsListener如果不指定独立的containerFactory的话是只能消费queue消息"><a href="#2、-JmsListener如果不指定独立的containerFactory的话是只能消费queue消息" class="headerlink" title="2、@JmsListener如果不指定独立的containerFactory的话是只能消费queue消息"></a>2、@JmsListener如果不指定独立的containerFactory的话是只能消费queue消息</h4><p>  修改订阅者container：containerFactory&#x3D;”jmsListenerContainerTopic”</p>
<p> &#x2F;&#x2F;需要给topic定义独立的JmsListenerContainer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> JmsListenerContainerFactory&lt;?&gt; jmsListenerContainerTopic(ConnectionFactory activeMQConnectionFactory) &#123;</span><br><span class="line">	<span class="type">DefaultJmsListenerContainerFactory</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span>  <span class="title class_">DefaultJmsListenerContainerFactory</span>();</span><br><span class="line">	bean.setPubSubDomain(<span class="literal">true</span>);</span><br><span class="line">	bean.setConnectionFactory(activeMQConnectionFactory);</span><br><span class="line">	<span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>  在配置文件里面，注释掉 #spring.jms.pub-sub-domain&#x3D;true</p>
<h2 id="五、RocketMQ4-x消息队列介绍"><a href="#五、RocketMQ4-x消息队列介绍" class="headerlink" title="五、RocketMQ4.x消息队列介绍"></a>五、RocketMQ4.x消息队列介绍</h2><p>  简介：阿里开源消息队列 RocketMQ4.x介绍和新概念讲解</p>
<p> 1、Apache RocketMQ作为阿里开源的一款高性能、高吞吐量的分布式消息中间件</p>
<p> 2、特点</p>
<p> 1)在高压下1毫秒内响应延迟超过99.6％。</p>
<p> 2)适合金融类业务，高可用性跟踪和审计功能。</p>
<p> 3)支持发布订阅模型，和点对点</p>
<p> 4）支持拉pull和推push两种消息模式</p>
<p> 5)单一队列百万消息</p>
<p> 6)支持单master节点，多master节点，多master多slave节点</p>
<p> …</p>
<p> 3、概念</p>
<p> Producer:消息生产者</p>
<p> Producer Group:消息生产者组，发送同类消息的一个消息生产组</p>
<p> Consumer:消费者</p>
<p> Consumer Group:消费同个消息的多个实例</p>
<p> Tag:标签，子主题（二级分类）,用于区分同一个主题下的不同业务的消息</p>
<p> Topic:主题</p>
<p> Message：消息</p>
<p> Broker：MQ程序，接收生产的消息，提供给消费者消费的程序</p>
<p> Name Server：给生产和消费者提供路由信息，提供轻量级的服务发现和路由         </p>
<p> 3、官网地址：<a target="_blank" rel="noopener" href="http://rocketmq.apache.org/">http://rocketmq.apache.org/</a></p>
<p>  学习资源：</p>
<p> 1）<a target="_blank" rel="noopener" href="http://jm.taobao.org/">http://jm.taobao.org/</a>&lt;st1:chsdate year&#x3D;”2017” month&#x3D;”1” day&#x3D;”12” islunardate&#x3D;”False” isrocdate&#x3D;”False” w:st&#x3D;”on”&gt;2017&#x2F;01&#x2F;12</st1:chsdate>&#x2F;rocketmq-quick-start-in-10-minutes&#x2F;</p>
<p> 2）<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/453c6e7ff81c">https://www.jianshu.com/p/453c6e7ff81c</a></p>
<h2 id="六、RocketMQ4-x本地快速部署"><a href="#六、RocketMQ4-x本地快速部署" class="headerlink" title="六、RocketMQ4.x本地快速部署"></a>六、RocketMQ4.x本地快速部署</h2><p>  简介:RocketMQ4.x本地快速部署</p>
<p> 1、安装前提条件(推荐)</p>
<p> 64bit OS, Linux&#x2F;Unix&#x2F;Mac</p>
<p> 64bit JDK 1.8+;</p>
<p> 2、快速开始 <a target="_blank" rel="noopener" href="http://rocketmq.apache.org/docs/quick-start/">http://rocketmq.apache.org/docs/quick-start/</a></p>
<p>  下载安装包：<a target="_blank" rel="noopener" href="https://www.apache.org/dyn/closer.cgi?path=rocketmq/">https://www.apache.org/dyn/closer.cgi?path=rocketmq/</a>&lt;st1:chsdate year&#x3D;”1899” month&#x3D;”12” day&#x3D;”30” islunardate&#x3D;”False” isrocdate&#x3D;”False” w:st&#x3D;”on”&gt;4.2.0</st1:chsdate>&#x2F;rocketmq-all-4.2.0-bin-release.zip</p>
<p>  路径：&#x2F;Users&#x2F;jack&#x2F;Desktop&#x2F;person&#x2F;springboot&#x2F;资料&#x2F;第13章&#x2F;第5课&#x2F;rocketmq-all-&lt;st1:chsdate year&#x3D;”1899” month&#x3D;”12” day&#x3D;”30” islunardate&#x3D;”False” isrocdate&#x3D;”False” w:st&#x3D;”on”&gt;4.2.0</st1:chsdate>-bin-release&#x2F;bin</p>
<p> 3、解压压缩包</p>
<p> 1）进入bin目录，启动namesrv</p>
<p> nohup sh mqnamesrv &amp;</p>
<ol start="2">
<li>查看日志 tail -f nohup.out</li>
</ol>
<p>  结尾：The Name Server boot success. serializeType&#x3D;JSON 表示启动成功</p>
<p> 3、启动broker  </p>
<p> nohup sh mqbroker -n 127.0.0.1:9876 &amp;</p>
<p> 4)、关闭nameserver broker执行的命令</p>
<p> sh mqshutdown namesrv</p>
<p> sh mqshutdown broker</p>
<h2 id="七、RoekerMQ4-x可视化控制台讲解"><a href="#七、RoekerMQ4-x可视化控制台讲解" class="headerlink" title="七、RoekerMQ4.x可视化控制台讲解"></a>七、RoekerMQ4.x可视化控制台讲解</h2><p>  简介：RoekerMQ4.x可视化控制台讲解</p>
<p> 1、下载 <a href="https://github.com/apache/rocketmq-externals">https://github.com/apache/rocketmq-externals</a></p>
<p> 2、编译打包 mvn clean package -Dmaven.test.skip&#x3D;true</p>
<p> 3、target目录 通过java -jar的方式运行</p>
<p> 4、无法连接获取broker信息</p>
<p> 1）修改配置文件,名称路由地址为 namesrvAddr，例如我本机为</p>
<p> 2）src&#x2F;main&#x2F;resources&#x2F;application.properties</p>
<p> rocketmq.config.namesrvAddr&#x3D;192.168.0.101:9876</p>
<p> 5、默认端口 localhost:8080</p>
<p> 6、注意：</p>
<p>  在阿里云，腾讯云或者虚拟机，记得检查端口号和防火墙是否启动</p>
<h2 id="八、Springboot2整合RocketMQ4-x实战上集"><a href="#八、Springboot2整合RocketMQ4-x实战上集" class="headerlink" title="八、Springboot2整合RocketMQ4.x实战上集"></a>八、Springboot2整合RocketMQ4.x实战上集</h2><p>  简介：Springboot2.x整合RocketMQ4.x实战，加入相关依赖，开发生产者代码</p>
<p>  启动nameser和broker</p>
<p> 1、加入相关依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;rocketmq.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;rocketmq.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p> 2、application.properties加入配置文件            </p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 消费者的组名</span></span><br><span class="line"><span class="attr">apache.rocketmq.consumer.PushConsumer</span>=<span class="string">orderConsumer</span></span><br><span class="line"><span class="comment"># 生产者的组名</span></span><br><span class="line"><span class="attr">apache.rocketmq.producer.producerGroup</span>=<span class="string">Producer</span></span><br><span class="line"><span class="comment"># NameServer地址</span></span><br><span class="line"><span class="attr">apache.rocketmq.namesrvAddr</span>=<span class="string">127.0.0.1:9876</span></span><br></pre></td></tr></table></figure>

<p> 3、开发MsgProducer</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> - 生产者的组名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="meta">@Value(&quot;$&#123;apache.rocketmq.producer.producerGroup&#125;&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> String producerGroup;</span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">- NameServer 地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="meta">@Value(&quot;$&#123;apache.rocketmq.namesrvAddr&#125;&quot;)</span></span><br><span class="line"> <span class="keyword">private</span> String namesrvAddr;</span><br><span class="line"> <span class="keyword">private</span> DefaultMQProducer producer ;</span><br><span class="line"> <span class="keyword">public</span> DefaultMQProducer <span class="title function_">getProducer</span><span class="params">()</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">this</span>.producer;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@PostConstruct</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">defaultMQProducer</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="comment">//生产者的组名</span></span><br><span class="line"> 	producer = <span class="keyword">new</span> <span class="title class_">DefaultMQProducer</span>(producerGroup);</span><br><span class="line"> <span class="comment">//指定NameServer地址，多个地址以 ; 隔开</span></span><br><span class="line"> <span class="comment">//如 producer.setNamesrvAddr(&quot;192.168.100.141:9876;192.168.100.142:9876;192.168.100.149:9876&quot;);</span></span><br><span class="line">     producer.setNamesrvAddr(namesrvAddr);</span><br><span class="line">     producer.setVipChannelEnabled(<span class="literal">false</span>);</span><br><span class="line"> <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> - Producer对象在使用之前必须要调用start初始化，只能初始化一次</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> 	producer.start();</span><br><span class="line"> &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"> 	e.printStackTrace();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// producer.shutdown(); 一般在应用上下文，关闭的时候进行关闭，用上下文监听器</span></span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h2 id="九、Springboot2整合RocketMQ4-x实战下集"><a href="#九、Springboot2整合RocketMQ4-x实战下集" class="headerlink" title="九、Springboot2整合RocketMQ4.x实战下集"></a>九、Springboot2整合RocketMQ4.x实战下集</h2><p>  简介：Springboot2.x整合RocketMQ4.x实战，开发消费者代码，常见问题处理</p>
<p> 1、创建消费者</p>
<p>  问题：</p>
<p> 1、Caused by: org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to &lt;172.17.42.1:10911&gt; failed</p>
<p> 2、com.alibaba.rocketmq.client.exception.MQClientException: Send [1] times, still failed, cost [1647]ms, Topic: TopicTest1, BrokersSent: [broker-a, null, null]</p>
<p> 3、org.apache.rocketmq.client.exception.MQClientException: Send [3] times, still failed, cost [497]ms, Topic: TopicTest, BrokersSent: [chenyaowudeMacBook-Air.local, chenyaowudeMacBook-Air.local, chenyaowudeMacBook-Air.local]</p>
<p>  解决：多网卡问题处理</p>
<p> 1、设置producer: producer.setVipChannelEnabled(false);</p>
<p> 2、编辑ROCKETMQ 配置文件：broker.conf（下列ip为自己的ip）</p>
<p> namesrvAddr &#x3D; 192.168.0.101:9876</p>
<p> brokerIP1 &#x3D; 192.168.0.101</p>
<p> 4、DESC: service not available now, maybe disk full, CL:</p>
<p>  解决：修改启动脚本runbroker.sh，在里面增加一句话即可：            </p>
<p> JAVA_OPT&#x3D;”${JAVA_OPT} -Drocketmq.broker.diskSpaceWarningLevelRatio&#x3D;0.98”</p>
<p>  （磁盘保护的百分比设置成98%，只有磁盘空间使用率达到98%时才拒绝接收producer消息）</p>
<p>  常见问题处理：</p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/sqzhao/article/details/54834761">https://blog.csdn.net/sqzhao/article/details/54834761</a></p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/mayifan0/article/details/67633729">https://blog.csdn.net/mayifan0/article/details/67633729</a></p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/a906423355/article/details/78192828">https://blog.csdn.net/a906423355/article/details/78192828</a></p>
<h2 id="十、SpringBoot多环境配置介绍和项目实战（核心知识）"><a href="#十、SpringBoot多环境配置介绍和项目实战（核心知识）" class="headerlink" title="十、SpringBoot多环境配置介绍和项目实战（核心知识）"></a>十、SpringBoot多环境配置介绍和项目实战（核心知识）</h2><p>  简介：SpringBoot介绍多环境配置和使用场景</p>
<p> 1、不同环境使用不同配置</p>
<p>  例如数据库配置，在开发的时候，我们一般用开发数据库，而在生产环境的时候，我们是用正式的数据</p>
<p> 2、配置文件存放路径</p>
<p> classpath根目录的“&#x2F;config”包下</p>
<p> classpath的根目录下</p>
<p> 3、spring boot允许通过命名约定按照一定的格式(application-{profile}.properties)来定义多个配置文件</p>
<h2 id="十一、SprinBoot2-x响应式编程简介"><a href="#十一、SprinBoot2-x响应式编程简介" class="headerlink" title="十一、SprinBoot2.x响应式编程简介"></a>十一、SprinBoot2.x响应式编程简介</h2><p>  简介:讲解什么是reactive响应式编程和使用的好处</p>
<p> 1、基础理解：</p>
<p>  依赖于事件，事件驱动(Event-driven)</p>
<p>  一系列事件称为“流”</p>
<p>  异步</p>
<p>  非阻塞</p>
<p>  观察者模式</p>
<p>  网上的一个例子：</p>
<p> int b&#x3D; 2;</p>
<p> int c&#x3D;3</p>
<p> int a &#x3D; b+c &#x2F;&#x2F;命令式编程后续b和c变化，都不影响a</p>
<p> b&#x3D;5;</p>
<p> int b&#x3D; 2;</p>
<p> int c&#x3D; 3</p>
<p> int a &#x3D; b+c &#x2F;&#x2F;响应式编程中，a的变化，会和b、c的变化而变化（事件驱动）</p>
<p> b&#x3D;5;</p>
<p> 2、官网：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/">https://docs.spring.io/spring-boot/docs/</a>&lt;st1:chsdate year&#x3D;”1899” month&#x3D;”12” day&#x3D;”30” islunardate&#x3D;”False” isrocdate&#x3D;”False” w:st&#x3D;”on”&gt;2.1.0</st1:chsdate>.BUILD-SNAPSHOT&#x2F;reference&#x2F;htmlsingle&#x2F;#boot-features-webflux</p>
<p> SpingBoot2底层是用spring5,开始支持响应式编程，Spring又是基于Reactor试下响应式。</p>
<p>  学习资料</p>
<p> 1、reactive-streams学习资料：<a target="_blank" rel="noopener" href="http://www.reactive-streams.org/">http://www.reactive-streams.org/</a></p>
<p> 2、web-flux相关资料：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#spring-webflux">https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#spring-webflux</a></p>
<h2 id="十二、SpringBoot2-x响应式编程webflux介绍"><a href="#十二、SpringBoot2-x响应式编程webflux介绍" class="headerlink" title="十二、SpringBoot2.x响应式编程webflux介绍"></a>十二、SpringBoot2.x响应式编程webflux介绍</h2><p>  简介：讲解SpringBoot2.x响应式编程介绍 Mono、Flux对象和优缺点</p>
<p> 1、Spring WebFlux是Spring Framework 5.0中引入的新的反应式Web框架</p>
<p>  与Spring MVC不同，它不需要Servlet API，完全异步和非阻塞，并 通过Reactor项目实现Reactive Streams规范。</p>
<p> RxJava</p>
<p> 2、Flux和Mono User List<User></p>
<p> 1）简单业务而言：和其他普通对象差别不大，复杂请求业务，就可以提升性能</p>
<p> 2）通俗理解：</p>
<p> Mono 表示的是包含 0 或者 1 个元素的异步序列</p>
<p> mono-&gt;单一对象 User redis-&gt;用户ID-》唯一的用户Mono<User></p>
<p> Flux 表示的是包含 0 到 N 个元素的异步序列</p>
<p> flux-&gt;数组列表对象 List<User> redis-&gt;男性用户-&gt;Flux<User></p>
<p> Flux 和 Mono 之间可以进行转换</p>
<p> 3、Spring WebFlux有两种风格：基于功能和基于注解的。基于注解非常接近Spring MVC模型，如以下示例所示：</p>
<p>  第一种：</p>
<p> @RestController</p>
<p> @RequestMapping（“&#x2F; users”）</p>
<p> public class MyRestController {</p>
<p> @GetMapping（“&#x2F; {user}”）</p>
<p> public Mono <User> getUser（ @PathVariable Long user）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p> @GetMapping（“&#x2F; {user} &#x2F; customers”）</p>
<p> public Flux <Customer> getUserCustomers（ @PathVariable Long user）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p> @DeleteMapping（“&#x2F; {user}”）</p>
<p> public Mono <User> deleteUser（ @PathVariable Long user）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p> }</p>
<p>  第二种： 路由配置与请求的实际处理分开</p>
<p> @Configuration</p>
<p> public class RoutingConfiguration {</p>
<p> @Bean</p>
<p> public RouterFunction <ServerResponse> monoRouterFunction（UserHandler userHandler）{</p>
<p> return route（GET（ “&#x2F; {user}”）.and（accept（APPLICATION_JSON）），userHandler :: getUser）</p>
<p> .andRoute（GET（“&#x2F; {user} &#x2F; customers”）.and（accept（APPLICATION_JSON）），userHandler :: getUserCustomers）</p>
<p> .andRoute（DELETE（“&#x2F; {user}”）.and（accept（APPLICATION_JSON）），userHandler :: deleteUser）;</p>
<p> }</p>
<p> }</p>
<p> @Component</p>
<p> public class UserHandler {</p>
<p>  公共 Mono <ServerResponse> getUser（ServerRequest请求）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p> public Mono <ServerResponse> getUserCustomers（ServerRequest request）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p>  公共 Mono <ServerResponse> deleteUser（ServerRequest请求）{</p>
<p> &#x2F;&#x2F; …</p>
<p> }</p>
<p> }</p>
<p> 4、Spring WebFlux应用程序不严格依赖于Servlet API，因此它们不能作为war文件部署，也不能使用src&#x2F;main&#x2F;webapp目录</p>
<p> 5、可以整合多个模板引擎</p>
<p>  除了REST Web服务外，您还可以使用Spring WebFlux提供动态HTML内容。Spring WebFlux支持各种模板技术，包括Thymeleaf，FreeMarker</p>
<h2 id="十三、SpringBoot2-x-webflux实战"><a href="#十三、SpringBoot2-x-webflux实战" class="headerlink" title="十三、SpringBoot2.x webflux实战"></a>十三、SpringBoot2.x webflux实战</h2><p>  简介:webflux响应式编程实战</p>
<p> 1、WebFlux中，请求和响应不再是WebMVC中的ServletRequest和ServletResponse，而是ServerRequest和ServerResponse</p>
<p> 2、加入依赖，如果同时存在spring-boot-starter-web，则会优先用spring-boot-starter-web</p>
 <dependency>

<p> <groupId>org.springframework.boot</groupId></p>
<p> <artifactId>spring-boot-starter-webflux</artifactId></p>
 </dependency>

<p>  测试</p>
<p> localhost:8080&#x2F;api&#x2F;v1&#x2F;user&#x2F;test</p>
<p> 3、启动方式默认是Netty,8080端口</p>
<p> 4、参考：<a target="_blank" rel="noopener" href="https://spring.io/blog/2016/04/19/understanding-reactive-types">https://spring.io/blog/2016/04/19/understanding-reactive-types</a>、</p>
<h2 id="十四、服务端推送常用技术介绍"><a href="#十四、服务端推送常用技术介绍" class="headerlink" title="十四、服务端推送常用技术介绍"></a>十四、服务端推送常用技术介绍</h2><p>  简介：服务端常用推送技术介绍，如websocket，sse轮询等</p>
<p> 1、客户端轮询:ajax定时拉取</p>
<p> 2、服务端主动推送:WebSocket</p>
<p>  全双工的，本质上是一个额外的tcp连接，建立和关闭时握手使用http协议，其他数据传输不使用http协议</p>
<p>  更加复杂一些，适用于需要进行复杂双向数据通讯的场景</p>
<p> 3、服务端主动推送:SSE (Server Send Event)</p>
<p> html5新标准，用来从服务端实时推送数据到浏览器端，</p>
<p>  直接建立在当前http连接上，本质上是保持一个http长连接，轻量协议</p>
<p>  简单的服务器数据推送的场景，使用服务器推送事件   </p>
<p>  学习资料：<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/html5/html_5_serversentevents.asp">http://www.w3school.com.cn/html5/html_5_serversentevents.asp</a></p>
<h2 id="十五、高级篇幅之云服务器介绍和部署生产环境实战"><a href="#十五、高级篇幅之云服务器介绍和部署生产环境实战" class="headerlink" title="十五、高级篇幅之云服务器介绍和部署生产环境实战"></a>十五、高级篇幅之云服务器介绍和部署生产环境实战</h2><p>1、阿里云服务器介绍和使用讲解</p>
<p>  简介：阿里云服务器介绍和使用讲解</p>
<p>2、阿里云Linux服务器部署JDK8实战</p>
<p>  简介：在阿里云服务器上安装JDK8和配置环境变量</p>
<p> lnux下使用wget下载jdk8:</p>
<p>  进到目录&#x2F;usr&#x2F;local&#x2F;software</p>
<p>  配置环境变量</p>
<p> vim &#x2F;etc&#x2F;profile</p>
<p>  加入</p>
<p> export JAVA_HOME&#x3D;&#x2F;usr&#x2F;local&#x2F;software&#x2F;jdk8</p>
<p> export PATH&#x3D;$PATH:$JAVA_HOME&#x2F;bin</p>
<p> export CLASSPATH&#x3D;.:$JAVA_HOME&#x2F;lib&#x2F;dt.jar:$JAVA_HOME&#x2F;lib&#x2F;tools.jar</p>
<p> export JAVA_HOME PATH CLASSPATH</p>
<p>  使用 source &#x2F;etc&#x2F;profile 让配置立刻生效</p>
<p>3、阿里云服务器SpringBoot2.x生产环境部署实战</p>
<p>  简介：讲解SpringBoot生产环境部署和常见注意事项</p>
<p> 1、去除相关生产环境没用的jar</p>
<p>  比如热部署dev-tool</p>
<p> 2、本地maven打包成jar包</p>
<p> mvn clean package -Dmaven.test.skip&#x3D;true 跳过测试</p>
<p> 3、服务器安装jdk，上传Jar包</p>
<p>  上传工具：</p>
<p> windows:</p>
<p> winscp</p>
<p> securtyCRT</p>
<p> mac：</p>
<p> filezilla</p>
<p> ssh <a href="mailto:&#x72;&#111;&#x6f;&#x74;&#64;&#x31;&#50;&#48;&#x2e;&#x37;&#x39;&#46;&#x31;&#54;&#48;&#46;&#49;&#x34;&#x33;">&#x72;&#111;&#x6f;&#x74;&#64;&#x31;&#50;&#48;&#x2e;&#x37;&#x39;&#46;&#x31;&#54;&#48;&#46;&#49;&#x34;&#x33;</a></p>
<p>  访问路径 <a target="_blank" rel="noopener" href="http://120.79.160.143:8080/api/v1/user/find">http://120.79.160.143:8080/api/v1/user/find</a></p>
<p> java -jar xxxx.jar</p>
<p>  守护进程、系统服务、shell脚本</p>
<p>  打包指定配置文件</p>
<p> 1、使用maven的profiles</p>
<p> 2、使用springboot的profile&#x3D;active</p>
<p>  访问不了</p>
<p> 1、阿里云防火墙是否开启，可以选择关闭，关闭是不安全的，可以选择开放端口</p>
<p> 2、阿里云的安全访问组，开启对应的端口，如果应用是以80端口启动，则默认可以访问</p>
<p> 4、成熟的互联网公司应该有的架构</p>
<p>  本地提交生产代码-&gt;gitlab仓库-&gt;Jenkins自动化构建-&gt;运维或者开发人员发布</p>
<h2 id="十六、SpringBoot2-x监控Actuator实战上集"><a href="#十六、SpringBoot2-x监控Actuator实战上集" class="headerlink" title="十六、SpringBoot2.x监控Actuator实战上集"></a>十六、SpringBoot2.x监控Actuator实战上集</h2><p>  简介：讲解SpringBoot使用actuator监控配置和使用</p>
<p>  可用性：100%，99.9%</p>
<p> 1、介绍什么是actuator</p>
<p>  官方介绍：</p>
<p> Spring Boot包含许多附加功能，可帮助您在将应用程序投入生产时监视和管理应用程序。 可以选择使用HTTP端点或JMX来管理和监控您的应用程序，自动应用于审计，健康和指标收集;</p>
<p>  一句话：springboot提供用于监控和管理生产环境的模块</p>
<p>  官方文档：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/">https://docs.spring.io/spring-boot/docs/</a>&lt;st1:chsdate year&#x3D;”1899” month&#x3D;”12” day&#x3D;”30” islunardate&#x3D;”False” isrocdate&#x3D;”False” w:st&#x3D;”on”&gt;2.1.0</st1:chsdate>.BUILD-SNAPSHOT&#x2F;reference&#x2F;htmlsingle&#x2F;#production-ready</p>
<p> 2、加入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> 3、加入上述依赖后，访问几个url</p>
<p> <code>/actuator/health</code><br> <code>/actuator/info</code><br> <code>/actuator</code></p>
<h2 id="十七、SpringBoot2监控Actuator下集及生产环境建议"><a href="#十七、SpringBoot2监控Actuator下集及生产环境建议" class="headerlink" title="十七、SpringBoot2监控Actuator下集及生产环境建议"></a>十七、SpringBoot2监控Actuator下集及生产环境建议</h2><p>  简介：SpringBoot2.x监控Actuator实战下集及生产环境建议，SpringBoot新旧版本区别</p>
<p>  注意点: 网上的资料大多数没有讲到访问的前缀</p>
<p>  端点基础路径由 &#x2F; 调整到 &#x2F;actuator</p>
<p>  如：&#x2F;info调整为&#x2F;actuator&#x2F;info</p>
<p> &#x2F;actuator&#x2F;xxx</p>
<p> 1、只能访问几个url</p>
<p> 1）需要在配置文件中加入下列配置</p>
<p> management.endpoints.web.exposure.include&#x3D;*</p>
<p> 2）官网说明：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-actuator</a></p>
<p>  原因：</p>
<p>  出于安全考虑，除&#x2F; health和&#x2F; info之外的所有执行器默认都是禁用的。 management.endpoints.web.exposure.include属性可用于启用执行器</p>
<p> 2、建议</p>
<p>  在设置management.endpoints.web.exposure.include之前，请确保暴露的执行器不包含敏感信息和&#x2F;</p>
<p>  或通过将其放置在防火墙进行控制，不对外进行使用</p>
<p>  禁用的端点将从应用程序上下文中完全删除。如果您只想更改端点所暴露的技术，请改用 include和exclude属性 。</p>
<p>  例子：</p>
<p>  开启全部：management.endpoints.web.exposure.include&#x3D;*</p>
<p>  开启某个：management.endpoints.web.exposure.include&#x3D;metrics</p>
<p>  关闭某个：management.endpoints.web.exposure.exclude&#x3D;metrics</p>
<p>  或者用springadmin进行管理</p>
<p>  相关资料：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/ityouknow/p/8440455.html">https://www.cnblogs.com/ityouknow/p/8440455.html</a></p>
<p>  或者用自己编写脚本监控</p>
<p> CPU、内存、磁盘、nginx的http响应状态码200,404,5xx</p>
<p> 3、介绍常用的几个</p>
<p> &#x2F;health 查看应用健康指标</p>
<p> &#x2F;actuator&#x2F;metrics 查看应用基本指标列表</p>
<p> &#x2F;actuator&#x2F;metrics&#x2F;{name} 通过上述列表，查看具体 查看具体指标</p>
<p> &#x2F;actuator&#x2F;env 显示来自Spring的 ConfigurableEnvironment的属性</o:smarttagtype></p>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/2921/">https://github.com/maxzhao-it/blog/post/2921/</a> </p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/SpringBoot/" rel="tag"># SpringBoot</a>
              <a href="/blog/tags/MQ/" rel="tag"># MQ</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog/post/5058/" rel="prev" title="IDEA使用技巧和快捷键">
                  <i class="fa fa-chevron-left"></i> IDEA使用技巧和快捷键
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog/post/2922/" rel="next" title="SpringBoot MQ参考资料">
                  SpringBoot MQ参考资料 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">赵联胜</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/blog/js/third-party/search/local-search.js"></script>




  <script src="/blog/js/third-party/pace.js"></script>

  





</body>
</html>
