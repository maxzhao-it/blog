<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/uploads/images/gt.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/uploads/images/gt-32.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/uploads/images/gt-16.jpg">
  <link rel="mask-icon" href="/blog/uploads/images/logo.png" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/blog/","images":"/blog/images","scheme":"Gemini","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/blog/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog/js/config.js"></script>



<link rel="canonical" href="https://github.com/maxzhao-it/blog/page/3/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/3/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>maxzhao</title>
  





  <noscript>
    <link rel="stylesheet" href="/blog/css/noscript.css">
  </noscript>
<link rel="alternate" href="/blog/atom.xml" title="maxzhao" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">maxzhao</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">不要害怕Exception和Error</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-schedule"><a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="赵联胜"
      src="/blog/uploads/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">赵联胜</p>
  <div class="site-description" itemprop="description">小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog/archives/">
          <span class="site-state-item-count">443</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog/categories/">
        <span class="site-state-item-count">190</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/blog/tags/">
        <span class="site-state-item-count">240</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://gitee.com/zhaoliansheng" title="GitHub → https:&#x2F;&#x2F;gitee.com&#x2F;zhaoliansheng" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/blog/1441439636@qq.com" title="E-Mail → 1441439636@qq.com"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.jianshu.com/u/e8c426a6007e" title="https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;e8c426a6007e" rel="noopener" target="_blank">我的简书</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/b988e32b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/b988e32b/" class="post-title-link" itemprop="url">AI工具及模型积累</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-08-29 19:36:12" itemprop="dateModified" datetime="2024-08-29T19:36:12+08:00">2024-08-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="大模型"><a href="#大模型" class="headerlink" title="大模型"></a>大模型</h2><h3 id="ChatGLM-【大语言模型-可针对特定领域】"><a href="#ChatGLM-【大语言模型-可针对特定领域】" class="headerlink" title="ChatGLM 【大语言模型-可针对特定领域】"></a>ChatGLM 【大语言模型-可针对特定领域】</h3><blockquote>
<p>应用场景：智能客服、机器人</p>
</blockquote>
<h3 id="LangChain-【语言模型的应用程序框架】"><a href="#LangChain-【语言模型的应用程序框架】" class="headerlink" title="LangChain 【语言模型的应用程序框架】"></a>LangChain 【语言模型的应用程序框架】</h3><h3 id="通义千问-【大语言模型服务】"><a href="#通义千问-【大语言模型服务】" class="headerlink" title="通义千问 【大语言模型服务】"></a>通义千问 【大语言模型服务】</h3><blockquote>
<p>开源免费，可以直接作为服务</p>
</blockquote>
<h3 id="AllenNLP【大语言模型工具】"><a href="#AllenNLP【大语言模型工具】" class="headerlink" title="AllenNLP【大语言模型工具】"></a>AllenNLP【大语言模型工具】</h3><p>自然语言处理研究的开源工具包</p>
<h2 id="知识图谱"><a href="#知识图谱" class="headerlink" title="知识图谱"></a>知识图谱</h2><h3 id="Neo4j【图库】"><a href="#Neo4j【图库】" class="headerlink" title="Neo4j【图库】"></a>Neo4j【图库】</h3><blockquote>
<p>免费</p>
</blockquote>
<h2 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h2><h3 id="LAMA【图像处理】"><a href="#LAMA【图像处理】" class="headerlink" title="LAMA【图像处理】"></a>LAMA【图像处理】</h3><h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><p>开源：</p>
<ul>
<li>kettle</li>
<li>nifi</li>
</ul>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/b988e32b/">https://github.com/maxzhao-it/blog/post/b988e32b/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/e1cf5d23/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/e1cf5d23/" class="post-title-link" itemprop="url">Jenkins配置插件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-04 17:03:15" itemprop="dateModified" datetime="2024-07-04T17:03:15+08:00">2024-07-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/DevelopTools/" itemprop="url" rel="index"><span itemprop="name">DevelopTools</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/DevelopTools/Jenkins/" itemprop="url" rel="index"><span itemprop="name">Jenkins</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="找到-Plugins"><a href="#找到-Plugins" class="headerlink" title="找到 Plugins"></a>找到 Plugins</h2><p><code>Dashboard &gt; Manage Jenkins  &gt; Plugins &gt; Available plugins</code></p>
<p>安装  </p>
<ul>
<li>Maven Integration</li>
<li>Publish Over SSH</li>
<li>Gitlab</li>
</ul>
<h2 id="安装完成后到-Tools"><a href="#安装完成后到-Tools" class="headerlink" title="安装完成后到 Tools"></a>安装完成后到 Tools</h2><p><code>Dashboard &gt; Manage Jenkins  &gt; Tools</code></p>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/e1cf5d23/">https://github.com/maxzhao-it/blog/post/e1cf5d23/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/934456223/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/934456223/" class="post-title-link" itemprop="url">RabbitMQ的消息模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-12-12 16:53:08" itemprop="dateModified" datetime="2023-12-12T16:53:08+08:00">2023-12-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/DevelopTools/" itemprop="url" rel="index"><span itemprop="name">DevelopTools</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/DevelopTools/RabbitMQ/" itemprop="url" rel="index"><span itemprop="name">RabbitMQ</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>交换机（Exchange）为<code>rabbitmq</code>独特的概念，用到的最常见的是4中类型：</p>
<ol>
<li>Direct: 先匹配, 再投送。即在绑定时设定一个routing_key, 消息的routing_key匹配时, 才会被交换器投送到绑定的队列中去. 交换机跟队列必须是精确的对应关系，这种最为简单。</li>
<li>Topic: 转发消息主要是根据通配符。在这种交换机下，队列和交换机的绑定会定义一种路由模式，那么，通配符就要在这种路由模式和路由键之间匹配后交换机才能转发消息 这种可以认为是Direct 的灵活版</li>
<li>Headers: 也是根据规则匹配, 相较于 direct 和 topic 固定地使用 routingkey , headers则是一个自定义匹配规则的类型， 在队列与交换器绑定时会设定一组键值对规则，消息中也包括一组键值对( headers属性)，当这些键值对有一对或全部匹配时，消息被投送到对应队列</li>
<li>Fanout : 消息广播模式，不管路由键或者是路由模式，会把消息发给绑定给它的全部队列，如果配置了routingkey会被忽略</li>
</ol>
<h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="topic"><a href="#topic" class="headerlink" title="topic"></a>topic</h3><h4 id="集群环境样例，同队列"><a href="#集群环境样例，同队列" class="headerlink" title="集群环境样例，同队列"></a>集群环境样例，同队列</h4><p>发送端：topic&#x3D;a.topic<br>接收端A： queue_a_1  routingKey&#x3D;a.topic.routing<br>接收端B： queue_a_1  routingKey&#x3D;a.topic.routing</p>
<p>发送端发送数据：C<br>接收端A、B： queue_a_1   任意端收到 C</p>
<h4 id="集群环境样例，不同队列"><a href="#集群环境样例，不同队列" class="headerlink" title="集群环境样例，不同队列"></a>集群环境样例，不同队列</h4><p>发送端：topic&#x3D;a.topic<br>接收端A： queue_a_1  routingKey&#x3D;a.topic.routing<br>接收端B： queue_a_1  routingKey&#x3D;a.topic.routing<br>接收端C： queue_a_2  routingKey&#x3D;a.topic.routing</p>
<p>发送端发送数据：C<br>接收端A、B： queue_a_1   任意端收到 C<br>接收端C： queue_a_2 收到 C</p>
<h4 id="集群环境样例，不同队列2"><a href="#集群环境样例，不同队列2" class="headerlink" title="集群环境样例，不同队列2"></a>集群环境样例，不同队列2</h4><p>发送端：topic&#x3D;a.topic<br>接收端A： queue_a_1  routingKey&#x3D;a.topic.routing<br>接收端B： queue_a_1  routingKey&#x3D;a.topic.routing<br>接收端C： queue_a_2  routingKey&#x3D;a.topic.routing<br>接收端D： queue_a_2  routingKey&#x3D;a.topic.#<br>接收端E： queue_a_2  routingKey&#x3D;a.topic.#</p>
<p>发送端发送数据：C<br>接收端A、B： queue_a_1   任意端收到 C<br>接收端C、D、E： queue_a_2 任意端收到 C</p>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/934456223/">https://github.com/maxzhao-it/blog/post/934456223/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/fb7de68/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/fb7de68/" class="post-title-link" itemprop="url">Linux的图形化配置笔记本盒盖不休眠</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-05-10 15:31:12" itemprop="dateModified" datetime="2024-05-10T15:31:12+08:00">2024-05-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&#x2F;etc&#x2F;systemd&#x2F;logind.conf</p>
<p>HandleLidSwitch&#x3D;suspend 改为 HandleLidSwitch&#x3D;lock</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重启</span></span><br><span class="line">reboot</span><br><span class="line"><span class="comment">#或者</span></span><br><span class="line">systemctl restart systemd logind </span><br></pre></td></tr></table></figure>
<ul>
<li>ignore 忽略盒盖操作</li>
<li>power off  盒盖关机</li>
<li>halt  盒盖挂起</li>
</ul>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/fb7de68/">https://github.com/maxzhao-it/blog/post/fb7de68/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/9be1de010/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/9be1de010/" class="post-title-link" itemprop="url">PVE8中的MacOS系统优化</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-12-12 09:06:21" itemprop="dateModified" datetime="2023-12-12T09:06:21+08:00">2023-12-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/PVE/" itemprop="url" rel="index"><span itemprop="name">PVE</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/PVE/MacOS/" itemprop="url" rel="index"><span itemprop="name">MacOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="配置中文"><a href="#配置中文" class="headerlink" title="配置中文"></a>配置中文</h2><p>setting -&gt; 搜索 Language &amp; Region -&gt;  添加中文 -&gt; TranslationLanguages -&gt; Chinese Download -&gt; 并将简体中文移动到第一个</p>
<p>重启</p>
<h2 id="引导优化"><a href="#引导优化" class="headerlink" title="引导优化"></a>引导优化</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil list</span><br></pre></td></tr></table></figure>

<p><img src="/blog/uploads/images/pve/macos/pve-macos-disk-0.png" alt="macos-disk-0.png"></p>
<blockquote>
<p>disk0 虚拟硬盘<br>disk1 Opencore 镜像盘<br>disk2 是系统盘</p>
</blockquote>
<p>现在要把  disk1s1 覆盖 disk0s1</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">dd</span> <span class="keyword">if</span>=/dev/disk1s1 of=/dev/disk0s1</span><br></pre></td></tr></table></figure>

<p>关机，分离 OpenCore，启动</p>
<h2 id="开机自启"><a href="#开机自启" class="headerlink" title="开机自启"></a>开机自启</h2><blockquote>
<p>必须要做 <strong>引导优化</strong></p>
</blockquote>
<p>下载 <a href="https://github.com/corpnewt/ProperTree">https://github.com/corpnewt/ProperTree</a></p>
<blockquote>
<p><a href="/blog/uploads/pve/mac/ProperTree.zip">ProperTree.zip</a></p>
</blockquote>
<p>安装 <a href="python.org">python3</a>  </p>
<p>运行 <code>propertree/buildapp-select.command</code></p>
<p>选择  &#x2F;Library&#x2F;Frameworks&#x2F;Python.framework&#x2F;Versions&#x2F;3.12&#x2F;bin&#x2F;python3</p>
<p>加载引导</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo diskutil mount disk0s1</span><br></pre></td></tr></table></figure>
<p>打开访达的位置-&gt; EFI&#x2F;OC&#x2F;config.plist</p>
<p>cmd +f  搜索 showpicker ，选项改为 False，cmd +s 保存</p>
<p>重启，就可以自动重启了</p>
<h2 id="使用-U盘"><a href="#使用-U盘" class="headerlink" title="使用 U盘"></a>使用 U盘</h2><p>使用USB端口，选择U盘的端口，下次再次插入 U 盘、硬盘，键盘都可以直通。</p>
<blockquote>
<p>USB2.0 与 USB2.0 是不同的端口，所以同一个接口需要配置两次才可以兼容 USB2.0 和 USB3.0</p>
</blockquote>
<h2 id="开启-VNC-登录"><a href="#开启-VNC-登录" class="headerlink" title="开启 VNC 登录"></a>开启 VNC 登录</h2><p>setting -&gt; sharing -&gt; Screen Sharing -&gt; + -&gt; 选择当前账号</p>
<h2 id="开启-SSH-登录"><a href="#开启-SSH-登录" class="headerlink" title="开启 SSH 登录"></a>开启 SSH 登录</h2><p>setting -&gt; sharing -&gt; Remote Login -&gt; + -&gt; 选择当前账号</p>
<h2 id="显卡直通"><a href="#显卡直通" class="headerlink" title="显卡直通"></a>显卡直通</h2><p>NVRAM-boot-args </p>
<p>改为 keepsyms&#x3D;1 -v agdpmod&#x3D;pikera</p>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/9be1de010/">https://github.com/maxzhao-it/blog/post/9be1de010/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/9be1de00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/9be1de00/" class="post-title-link" itemprop="url">PVE8安装MacOS</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-29 11:27:07" itemprop="dateModified" datetime="2023-11-29T11:27:07+08:00">2023-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/PVE/" itemprop="url" rel="index"><span itemprop="name">PVE</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/PVE/MacOS/" itemprop="url" rel="index"><span itemprop="name">MacOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><p><a href="https://github.com/thenickdude/KVM-Opencore/releases">https://github.com/thenickdude/KVM-Opencore/releases</a></p>
<p>下载 <code>OpenCore-v20.iso.gz</code> 找到最新的就可以</p>
<h2 id="创建-MacOS镜像"><a href="#创建-MacOS镜像" class="headerlink" title="创建 MacOS镜像"></a>创建 MacOS镜像</h2><p><code>Ubuntu</code> 系统下</p>
<h3 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h3><p>好用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/thenickdude/OSX-KVM</span><br><span class="line"><span class="built_in">cd</span> ~/OSX-KVM/scripts/monterey</span><br><span class="line">apt install -y qemu-utils make</span><br><span class="line">make Monterey-recovery.img</span><br></pre></td></tr></table></figure>

<p>弃用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/thenickdude/OSX-KVM</span><br><span class="line"><span class="built_in">cd</span> ~/OSX-KVM/scripts/ventura</span><br><span class="line">apt install -y qemu-utils make</span><br><span class="line">make Ventura-recovery.img</span><br></pre></td></tr></table></figure>

<h3 id="iso上传-pve"><a href="#iso上传-pve" class="headerlink" title="iso上传 pve"></a>iso上传 pve</h3><p>将</p>
<ul>
<li><code>Monterey-recovery.img</code></li>
<li><code>OpenCore-v20.iso</code></li>
</ul>
<p>上传到 <code>pve ISO</code> 镜像中</p>
<blockquote>
<p>这里有 2023-11-25下载的版本：</p>
<p><a href="/blog/uploads/pve/mac/OpenCore-v20.iso.gz">OpenCore-v20.iso.gz</a></p>
<p><a href="/blog/uploads/pve/mac/OSX-KVM-master.zip">OSX-KVM-master.zip</a></p>
</blockquote>
<h2 id="修改-vm-conf"><a href="#修改-vm-conf" class="headerlink" title="修改 vm.conf"></a>修改 vm.conf</h2><p>这里VM 的id 为 1000</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/pve/qemu-server/1000.conf</span><br></pre></td></tr></table></figure>

<p>在第二行添加参数（<code>intel</code> 的处理器）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">args: -device isa-applesmc,osk=&quot;ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc&quot; -smbios type=2 -device usb-kbd,bus=ehci.0,port=2 -global nec-usb-xhci.msi=off -cpu host,kvm=on,vendor=GenuineIntel,+kvm_pv_unhalt,+kvm_pv_eoi,+hypervisor,+invtsc</span><br></pre></td></tr></table></figure>

<p>将两个<code>ISO</code>的配置修改：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">media=cdrom  改为 cache=unsafe</span><br></pre></td></tr></table></figure>

<p>结果如下:</p>
<p><img src="/blog/uploads/images/pve/pve-macos-install-img.png"></p>
<h2 id="配置-VM"><a href="#配置-VM" class="headerlink" title="配置 VM"></a>配置 <code>VM</code></h2><p>这里 VM ID 设置为 1000</p>
<p><img src="/blog/uploads/images/pve/pve-macos-img.png"><br><img src="/blog/uploads/images/pve/pve-macos-img_1.png"><br><img src="/blog/uploads/images/pve/pve-macos-img_2.png"><br><img src="/blog/uploads/images/pve/pve-macos-img_3.png"><br><img src="/blog/uploads/images/pve/pve-macos-img_4.png"></p>
<h2 id="启动系统"><a href="#启动系统" class="headerlink" title="启动系统"></a>启动系统</h2><p>选第一个按回车就可以了</p>
<h3 id="配置磁盘"><a href="#配置磁盘" class="headerlink" title="配置磁盘"></a>配置磁盘</h3><p><img src="/blog/uploads/images/pve/pve-macos-install-img_1.png"><br><img src="/blog/uploads/images/pve/pve-macos-install-img_2.png"></p>
<p>结束后左上角叉掉</p>
<p><img src="/blog/uploads/images/pve/pve-macos-install-img_3.png"></p>
<ul>
<li>Agree</li>
<li>Agree</li>
<li>选择硬盘 maxmac</li>
</ul>
<p>等待重启</p>
<ul>
<li>第一次选择 install</li>
<li>第二次选择 install</li>
<li>第三次选择 maxmac</li>
<li>第四次选择 maxmac</li>
</ul>
<p>启动后选择 China</p>
<p>Migration Assistant 选择 Not Now</p>
<p>时区选择shanghai</p>
<h2 id="下一步优化-MacOS"><a href="#下一步优化-MacOS" class="headerlink" title="下一步优化 MacOS"></a>下一步优化 MacOS</h2><p><a href="./9be1de010">PVE8中的MacOS系统优化</a></p>
<h2 id="修改时间"><a href="#修改时间" class="headerlink" title="修改时间"></a>修改时间</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> -v+8H <span class="string">&quot;+%m%d%H%M%S&quot;</span> | xargs <span class="built_in">date</span></span><br></pre></td></tr></table></figure>




<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/9be1de00/">https://github.com/maxzhao-it/blog/post/9be1de00/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/af5eafbf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/af5eafbf/" class="post-title-link" itemprop="url">Filebeat-8.x+Logstash采集log4j2日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-25 13:55:25" itemprop="dateModified" datetime="2023-11-25T13:55:25+08:00">2023-11-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/ELK/" itemprop="url" rel="index"><span itemprop="name">ELK</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>版本：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://artifacts.elastic.co/downloads/logstash/logstash-8.11.1-linux-x86_64.tar.gz"><code>logstash-8.11.1-linux-x86_64.tar.gz</code></a></li>
<li><a target="_blank" rel="noopener" href="https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.11.1-linux-x86_64.tar.gz">filebeat-8.11.1-linux-x86_64.tar.gz</a></li>
</ul>
<p>默认安装路径  <code>/opt/logstash </code> 、 <code>/opt/filebeat </code></p>
</blockquote>
<h2 id="Logstash-配置"><a href="#Logstash-配置" class="headerlink" title="Logstash 配置"></a><code>Logstash</code> 配置</h2><h3 id="测试接收-filebeat"><a href="#测试接收-filebeat" class="headerlink" title="测试接收 filebeat"></a>测试接收 <code>filebeat</code></h3><p>新建文件 <code>config/first-pipeline.conf</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">    beats &#123;</span><br><span class="line">        port =&gt; &quot;5044&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The filter part of this file is commented out to indicate that it is</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">optional.</span></span><br><span class="line">filter &#123;</span><br><span class="line">    grok &#123;</span><br><span class="line">        match =&gt; &#123; &quot;message&quot; =&gt; &quot;(?&lt;year&gt;\d&#123;4&#125;)(?&lt;month&gt;\d&#123;2&#125;)(?&lt;day&gt;\d&#123;2&#125;)(?&lt;hour&gt;\d&#123;2&#125;)(?&lt;minute&gt;\d&#123;2&#125;)(?&lt;second&gt;\d&#123;2&#125;)(?&lt;millisecond&gt;\d&#123;3&#125;):%&#123;LOGLEVEL:logLevel&#125;%&#123;SPACE&#125;\[%&#123;INT:thread&#125;\]%&#123;SPACE&#125;\[%&#123;WORD:projectName&#125;\]%&#123;SPACE&#125;\[(?&lt;cId&gt;.*?|\d&#123;0,&#125;)\]%&#123;SPACE&#125;\[%&#123;DATA:cpId&#125;\]%&#123;SPACE&#125;\[%&#123;DATA:rTId&#125;\]%&#123;SPACE&#125;%&#123;JAVACLASS:java&#125;\(%&#123;INT:javaNum&#125;\)\:%&#123;SPACE&#125;%&#123;JAVALOGMESSAGE:msg&#125;&quot;&#125;</span><br><span class="line">    &#125;       </span><br><span class="line">	mutate &#123;</span><br><span class="line">        add_field =&gt; &#123;</span><br><span class="line">            &quot;timestamp&quot; =&gt; &quot;%&#123;year&#125;%&#123;month&#125;%&#123;day&#125;%&#123;hour&#125;%&#123;minute&#125;%&#123;second&#125;%&#123;millisecond&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">		remove_field =&gt;[&quot;log&quot;,&quot;input&quot;,&quot;ecs&quot;,&quot;event&quot;,&quot;host&quot;,&quot;agent&quot;,&quot;message&quot;]</span><br><span class="line">		</span><br><span class="line">    &#125;</span><br><span class="line">	date &#123;</span><br><span class="line">		match =&gt; [ &quot;timestamp&quot;, &quot;yyyyMMddHHmmssSSS&quot; ]</span><br><span class="line">		target =&gt; &quot;@timestamp&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">    stdout &#123; codec =&gt; rubydebug &#125;</span><br><span class="line">    if &quot;test&quot; in [projectName] &#123;</span><br><span class="line">        elasticsearch &#123;</span><br><span class="line">            hosts =&gt; &quot;192.168.2.8:9200&quot;</span><br><span class="line">            index =&gt; &quot;app-log-api-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if &quot;y&quot; in [projectName] &#123;</span><br><span class="line">        elasticsearch &#123;</span><br><span class="line">            hosts =&gt; &quot;192.168.2.8:9200&quot;</span><br><span class="line">            index =&gt; &quot;app-log-opt-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if &quot;x&quot; in [projectName] &#123;</span><br><span class="line">        elasticsearch &#123;</span><br><span class="line">            hosts =&gt; &quot;192.168.2.8:9200&quot;</span><br><span class="line">            index =&gt; &quot;app-log-sso-%&#123;+YYYY.MM.dd&#125;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/logstash -f first-pipeline.conf --config.test_and_exit</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">自动更新 --config.reload.automatic</span></span><br><span class="line">bin/logstash -f first-pipeline.conf --config.reload.automatic</span><br></pre></td></tr></table></figure>

<h3 id="Filebeat-配置"><a href="#Filebeat-配置" class="headerlink" title="Filebeat 配置"></a><code>Filebeat</code> 配置</h3><p><code>Filebeat.yml</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filebeat.inputs:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">filestream</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">my-filestream-id</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">  <span class="comment"># 日志文件路径修改</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/data/test-log/*.log</span></span><br><span class="line">  <span class="attr">prospector.scanner.exclude_files:</span> [<span class="string">&#x27;\.gz$&#x27;</span>]</span><br><span class="line">  <span class="attr">parsers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">multiline:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">pattern</span></span><br><span class="line">      <span class="comment"># 与模式不匹配的连续行将附加到匹配的上一行</span></span><br><span class="line">      <span class="attr">pattern:</span> <span class="string">&#x27;^\d&#x27;</span></span><br><span class="line">      <span class="attr">negate:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 与模式匹配的连续行将附加到不匹配的上一行</span></span><br><span class="line">      <span class="comment">#pattern: &#x27;^[[:space:]]+(at|\.&#123;3&#125;)[[:space:]]+\b|^[a-z]&#x27;</span></span><br><span class="line">      <span class="comment">#negate: false</span></span><br><span class="line">      <span class="attr">match:</span> <span class="string">after</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">max_lines:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">filebeat.config.modules:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">$&#123;path.config&#125;/modules.d/*.yml</span></span><br><span class="line">  <span class="attr">reload.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 不用es 这里要关闭</span></span><br><span class="line"><span class="attr">setup.template.enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">setup.template.settings:</span></span><br><span class="line">  <span class="attr">index.number_of_shards:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">#index.codec: best_compression</span></span><br><span class="line">  <span class="comment">#_source.enabled: false</span></span><br><span class="line"><span class="comment">#setup.kibana:</span></span><br><span class="line"><span class="attr">output.elasticsearch:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">output.logstash:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hosts:</span> [<span class="string">&quot;127.0.0.1:5044&quot;</span>]</span><br><span class="line">  <span class="attr">compression_level:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">processors:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_host_metadata:</span></span><br><span class="line">      <span class="attr">when.not.contains.tags:</span> <span class="string">forwarded</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_cloud_metadata:</span> <span class="string">~</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_docker_metadata:</span> <span class="string">~</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_kubernetes_metadata:</span> <span class="string">~</span></span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filebeat -c filebeat.yml -e</span><br></pre></td></tr></table></figure>

<h1 id="附"><a href="#附" class="headerlink" title="附"></a>附</h1><h2 id="grok-解析日志"><a href="#grok-解析日志" class="headerlink" title="grok 解析日志"></a><code>grok</code> 解析日志</h2><p>新版本的 <code>logstash</code> 自带 <code>grok</code> 插件</p>
<p>环境信息：</p>
<p>- 部署路径：<code>/opt/logstash</code><br>- <code>Log4j2</code> 对接方式：<code>Socket</code><br>- 部署地址：<code>192.168.2.8</code><br>- <code>logstash</code>建议使用 <a href="https://github.com/logstash-plugins/logstash-filter-grok"><code>grok</code></a>插件</p>
<blockquote>
<p><a href="*https://github.com/logstash-plugins/logstash-filter-grok*"><code>grok</code></a>是一个十分强大的<code>logstash filter</code>插件，他可以通过正则解析任意文本，将非结构化日志数据解析成结构化和方便查询的结构。<br><a target="_blank" rel="noopener" href="https://grokconstructor.appspot.com/do/match">在线测试</a>  <a href="https://github.com/logstash-plugins/logstash-patterns-core/tree/main/patterns">官方<code>pattern</code></a> <a href="*https://www.elastic.co/guide/en/logstash/8.2/working-with-plugins.html#listing-plugins*">插件安装</a><br>安装插件</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看已安装</span></span><br><span class="line">/opt/logstash/bin/logstash-plugin list --verbose</span><br></pre></td></tr></table></figure>

<blockquote>
<p>离线安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir /opt/logstash/plugins</span><br><span class="line">cd  /opt/logstash/plugins</span><br><span class="line">wget https://github.com/logstash-plugins/logstash-filter-grok/archive/refs/tags/v4.4.3.tar.gz</span><br><span class="line">tar -zxvf v4.4.2.tar.gz</span><br><span class="line">vim /opt/logstash/Gemfile</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">gem <span class="string">&quot;logstash-filter-grok&quot;</span>, :path =&gt; <span class="string">&quot;path&quot;</span></span></span><br></pre></td></tr></table></figure>

<p>在线安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/logstash-plugin install logstash-filter-grok</span><br><span class="line">bin/logstash-plugin update logstash-filter-grok</span><br></pre></td></tr></table></figure>

</blockquote>
<h2 id="部分-grok-表达式"><a href="#部分-grok-表达式" class="headerlink" title="部分 grok 表达式"></a>部分 <code>grok</code> 表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">USERNAME [a-zA-Z0-9._-]+</span><br><span class="line">USER %&#123;USERNAME&#125;</span><br><span class="line">EMAILLOCALPART [a-zA-Z0-9!#$%&amp;&#x27;*+\-/=?^_`&#123;|&#125;~]&#123;1,64&#125;(?:\.[a-zA-Z0-9!#$%&amp;&#x27;*+\-/=?^_`&#123;|&#125;~]&#123;1,62&#125;)&#123;0,63&#125;</span><br><span class="line">EMAILADDRESS %&#123;EMAILLOCALPART&#125;@%&#123;HOSTNAME&#125;</span><br><span class="line">INT (?:[+-]?(?:[0-9]+))</span><br><span class="line">BASE10NUM (?&lt;![0-9.+-])(?&gt;[+-]?(?:(?:[0-9]+(?:\.[0-9]+)?)|(?:\.[0-9]+)))</span><br><span class="line">NUMBER (?:%&#123;BASE10NUM&#125;)</span><br><span class="line">BASE16NUM (?&lt;![0-9A-Fa-f])(?:[+-]?(?:0x)?(?:[0-9A-Fa-f]+))</span><br><span class="line">BASE16FLOAT \b(?&lt;![0-9A-Fa-f.])(?:[+-]?(?:0x)?(?:(?:[0-9A-Fa-f]+(?:\.[0-9A-Fa-f]*)?)|(?:\.[0-9A-Fa-f]+)))\b</span><br><span class="line"></span><br><span class="line">POSINT \b(?:[1-9][0-9]*)\b</span><br><span class="line">NONNEGINT \b(?:[0-9]+)\b</span><br><span class="line">WORD \b\w+\b</span><br><span class="line">NOTSPACE \S+</span><br><span class="line">SPACE \s*</span><br><span class="line">DATA .*?</span><br><span class="line">GREEDYDATA .*</span><br><span class="line">QUOTEDSTRING (?&gt;(?&lt;!\\)(?&gt;&quot;(?&gt;\\.|[^\\&quot;]+)+&quot;|&quot;&quot;|(?&gt;&#x27;(?&gt;\\.|[^\\&#x27;]+)+&#x27;)|&#x27;&#x27;|(?&gt;`(?&gt;\\.|[^\\`]+)+`)|``))</span><br><span class="line">UUID [A-Fa-f0-9]&#123;8&#125;-(?:[A-Fa-f0-9]&#123;4&#125;-)&#123;3&#125;[A-Fa-f0-9]&#123;12&#125;</span><br><span class="line"># URN, allowing use of RFC 2141 section 2.3 reserved characters</span><br><span class="line">URN urn:[0-9A-Za-z][0-9A-Za-z-]&#123;0,31&#125;:(?:%[0-9a-fA-F]&#123;2&#125;|[0-9A-Za-z()+,.:=@;$_!*&#x27;/?#-])+</span><br><span class="line"></span><br><span class="line"># Networking</span><br><span class="line">MAC (?:%&#123;CISCOMAC&#125;|%&#123;WINDOWSMAC&#125;|%&#123;COMMONMAC&#125;)</span><br><span class="line">CISCOMAC (?:(?:[A-Fa-f0-9]&#123;4&#125;\.)&#123;2&#125;[A-Fa-f0-9]&#123;4&#125;)</span><br><span class="line">WINDOWSMAC (?:(?:[A-Fa-f0-9]&#123;2&#125;-)&#123;5&#125;[A-Fa-f0-9]&#123;2&#125;)</span><br><span class="line">COMMONMAC (?:(?:[A-Fa-f0-9]&#123;2&#125;:)&#123;5&#125;[A-Fa-f0-9]&#123;2&#125;)</span><br><span class="line">IPV6 ((([0-9A-Fa-f]&#123;1,4&#125;:)&#123;7&#125;([0-9A-Fa-f]&#123;1,4&#125;|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;6&#125;(:[0-9A-Fa-f]&#123;1,4&#125;|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;)|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;5&#125;(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,2&#125;)|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;)|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;4&#125;(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,3&#125;)|((:[0-9A-Fa-f]&#123;1,4&#125;)?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;))|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;3&#125;(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,4&#125;)|((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;0,2&#125;:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;))|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;2&#125;(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,5&#125;)|((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;0,3&#125;:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;))|:))|(([0-9A-Fa-f]&#123;1,4&#125;:)&#123;1&#125;(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,6&#125;)|((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;0,4&#125;:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;))|:))|(:(((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;1,7&#125;)|((:[0-9A-Fa-f]&#123;1,4&#125;)&#123;0,5&#125;:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d))&#123;3&#125;))|:)))(%.+)?</span><br><span class="line">IPV4 (?&lt;![0-9])(?:(?:[0-1]?[0-9]&#123;1,2&#125;|2[0-4][0-9]|25[0-5])[.](?:[0-1]?[0-9]&#123;1,2&#125;|2[0-4][0-9]|25[0-5])[.](?:[0-1]?[0-9]&#123;1,2&#125;|2[0-4][0-9]|25[0-5])[.](?:[0-1]?[0-9]&#123;1,2&#125;|2[0-4][0-9]|25[0-5]))(?![0-9])</span><br><span class="line">IP (?:%&#123;IPV6&#125;|%&#123;IPV4&#125;)</span><br><span class="line">HOSTNAME \b(?:[0-9A-Za-z][0-9A-Za-z-]&#123;0,62&#125;)(?:\.(?:[0-9A-Za-z][0-9A-Za-z-]&#123;0,62&#125;))*(\.?|\b)</span><br><span class="line">IPORHOST (?:%&#123;IP&#125;|%&#123;HOSTNAME&#125;)</span><br><span class="line">HOSTPORT %&#123;IPORHOST&#125;:%&#123;POSINT&#125;</span><br><span class="line"></span><br><span class="line"># paths (only absolute paths are matched)</span><br><span class="line">PATH (?:%&#123;UNIXPATH&#125;|%&#123;WINPATH&#125;)</span><br><span class="line">UNIXPATH (/[[[:alnum:]]_%!$@:.,+~-]*)+</span><br><span class="line">TTY (?:/dev/(pts|tty([pq])?)(\w+)?/?(?:[0-9]+))</span><br><span class="line">WINPATH (?&gt;[A-Za-z]+:|\\)(?:\\[^\\?*]*)+</span><br><span class="line">URIPROTO [A-Za-z]([A-Za-z0-9+\-.]+)+</span><br><span class="line">URIHOST %&#123;IPORHOST&#125;(?::%&#123;POSINT&#125;)?</span><br><span class="line"># uripath comes loosely from RFC1738, but mostly from what Firefox doesn&#x27;t turn into %XX</span><br><span class="line">URIPATH (?:/[A-Za-z0-9$.+!*&#x27;()&#123;&#125;,~:;=@#%&amp;_\-]*)+</span><br><span class="line">URIQUERY [A-Za-z0-9$.+!*&#x27;|()&#123;&#125;,~@#%&amp;/=:;_?\-\[\]&lt;&gt;]*</span><br><span class="line"># deprecated (kept due compatibility):</span><br><span class="line">URIPARAM \?%&#123;URIQUERY&#125;</span><br><span class="line">URIPATHPARAM %&#123;URIPATH&#125;(?:\?%&#123;URIQUERY&#125;)?</span><br><span class="line">URI %&#123;URIPROTO&#125;://(?:%&#123;USER&#125;(?::[^@]*)?@)?(?:%&#123;URIHOST&#125;)?(?:%&#123;URIPATH&#125;(?:\?%&#123;URIQUERY&#125;)?)?</span><br><span class="line"></span><br><span class="line"># Months: January, Feb, 3, 03, 12, December</span><br><span class="line">MONTH \b(?:[Jj]an(?:uary|uar)?|[Ff]eb(?:ruary|ruar)?|[Mm](?:a|ä)?r(?:ch|z)?|[Aa]pr(?:il)?|[Mm]a(?:y|i)?|[Jj]un(?:e|i)?|[Jj]ul(?:y|i)?|[Aa]ug(?:ust)?|[Ss]ep(?:tember)?|[Oo](?:c|k)?t(?:ober)?|[Nn]ov(?:ember)?|[Dd]e(?:c|z)(?:ember)?)\b</span><br><span class="line">MONTHNUM (?:0?[1-9]|1[0-2])</span><br><span class="line">MONTHNUM2 (?:0[1-9]|1[0-2])</span><br><span class="line">MONTHDAY (?:(?:0[1-9])|(?:[12][0-9])|(?:3[01])|[1-9])</span><br><span class="line"></span><br><span class="line"># Days: Monday, Tue, Thu, etc...</span><br><span class="line">DAY (?:Mon(?:day)?|Tue(?:sday)?|Wed(?:nesday)?|Thu(?:rsday)?|Fri(?:day)?|Sat(?:urday)?|Sun(?:day)?)</span><br><span class="line"></span><br><span class="line"># Years?</span><br><span class="line">YEAR (?&gt;\d\d)&#123;1,2&#125;</span><br><span class="line">HOUR (?:2[0123]|[01]?[0-9])</span><br><span class="line">MINUTE (?:[0-5][0-9])</span><br><span class="line"># &#x27;60&#x27; is a leap second in most time standards and thus is valid.</span><br><span class="line">SECOND (?:(?:[0-5]?[0-9]|60)(?:[:.,][0-9]+)?)</span><br><span class="line">TIME (?!&lt;[0-9])%&#123;HOUR&#125;:%&#123;MINUTE&#125;(?::%&#123;SECOND&#125;)(?![0-9])</span><br><span class="line"># datestamp is YYYY/MM/DD-HH:MM:SS.UUUU (or something like it)</span><br><span class="line">DATE_US %&#123;MONTHNUM&#125;[/-]%&#123;MONTHDAY&#125;[/-]%&#123;YEAR&#125;</span><br><span class="line">DATE_EU %&#123;MONTHDAY&#125;[./-]%&#123;MONTHNUM&#125;[./-]%&#123;YEAR&#125;</span><br><span class="line">ISO8601_TIMEZONE (?:Z|[+-]%&#123;HOUR&#125;(?::?%&#123;MINUTE&#125;))</span><br><span class="line">ISO8601_SECOND %&#123;SECOND&#125;</span><br><span class="line">TIMESTAMP_ISO8601 %&#123;YEAR&#125;-%&#123;MONTHNUM&#125;-%&#123;MONTHDAY&#125;[T ]%&#123;HOUR&#125;:?%&#123;MINUTE&#125;(?::?%&#123;SECOND&#125;)?%&#123;ISO8601_TIMEZONE&#125;?</span><br><span class="line">DATE %&#123;DATE_US&#125;|%&#123;DATE_EU&#125;</span><br><span class="line">DATESTAMP %&#123;DATE&#125;[- ]%&#123;TIME&#125;</span><br><span class="line">TZ (?:[APMCE][SD]T|UTC)</span><br><span class="line">DATESTAMP_RFC822 %&#123;DAY&#125; %&#123;MONTH&#125; %&#123;MONTHDAY&#125; %&#123;YEAR&#125; %&#123;TIME&#125; %&#123;TZ&#125;</span><br><span class="line">DATESTAMP_RFC2822 %&#123;DAY&#125;, %&#123;MONTHDAY&#125; %&#123;MONTH&#125; %&#123;YEAR&#125; %&#123;TIME&#125; %&#123;ISO8601_TIMEZONE&#125;</span><br><span class="line">DATESTAMP_OTHER %&#123;DAY&#125; %&#123;MONTH&#125; %&#123;MONTHDAY&#125; %&#123;TIME&#125; %&#123;TZ&#125; %&#123;YEAR&#125;</span><br><span class="line">DATESTAMP_EVENTLOG %&#123;YEAR&#125;%&#123;MONTHNUM2&#125;%&#123;MONTHDAY&#125;%&#123;HOUR&#125;%&#123;MINUTE&#125;%&#123;SECOND&#125;</span><br><span class="line"></span><br><span class="line"># Syslog Dates: Month Day HH:MM:SS</span><br><span class="line">SYSLOGTIMESTAMP %&#123;MONTH&#125; +%&#123;MONTHDAY&#125; %&#123;TIME&#125;</span><br><span class="line">PROG [\x21-\x5a\x5c\x5e-\x7e]+</span><br><span class="line">SYSLOGPROG %&#123;PROG:[process][name]&#125;(?:\[%&#123;POSINT:[process][pid]:int&#125;\])?</span><br><span class="line">SYSLOGHOST %&#123;IPORHOST&#125;</span><br><span class="line">SYSLOGFACILITY &lt;%&#123;NONNEGINT:[log][syslog][facility][code]:int&#125;.%&#123;NONNEGINT:[log][syslog][priority]:int&#125;&gt;</span><br><span class="line">HTTPDATE %&#123;MONTHDAY&#125;/%&#123;MONTH&#125;/%&#123;YEAR&#125;:%&#123;TIME&#125; %&#123;INT&#125;</span><br><span class="line"></span><br><span class="line"># Shortcuts</span><br><span class="line">QS %&#123;QUOTEDSTRING&#125;</span><br><span class="line"></span><br><span class="line"># Log formats</span><br><span class="line">SYSLOGBASE %&#123;SYSLOGTIMESTAMP:timestamp&#125; (?:%&#123;SYSLOGFACILITY&#125; )?%&#123;SYSLOGHOST:[host][hostname]&#125; %&#123;SYSLOGPROG&#125;:</span><br><span class="line"></span><br><span class="line"># Log Levels</span><br><span class="line">LOGLEVEL ([Aa]lert|ALERT|[Tt]race|TRACE|[Dd]ebug|DEBUG|[Nn]otice|NOTICE|[Ii]nfo?(?:rmation)?|INFO?(?:RMATION)?|[Ww]arn?(?:ing)?|WARN?(?:ING)?|[Ee]rr?(?:or)?|ERR?(?:OR)?|[Cc]rit?(?:ical)?|CRIT?(?:ICAL)?|[Ff]atal|FATAL|[Ss]evere|SEVERE|EMERG(?:ENCY)?|[Ee]merg(?:ency)?)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="部分-grok-java-表达式"><a href="#部分-grok-java-表达式" class="headerlink" title="部分 grok java  表达式"></a>部分 <code>grok java </code> 表达式</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">JAVACLASS (?:[a-zA-Z$_][a-zA-Z$_0-9]*\.)*[a-zA-Z$_][a-zA-Z$_0-9]*</span><br><span class="line">#Space is an allowed character to match special cases like &#x27;Native Method&#x27; or &#x27;Unknown Source&#x27;</span><br><span class="line">JAVAFILE (?:[a-zA-Z$_0-9. -]+)</span><br><span class="line">#Allow special &lt;init&gt;, &lt;clinit&gt; methods</span><br><span class="line">JAVAMETHOD (?:(&lt;(?:cl)?init&gt;)|[a-zA-Z$_][a-zA-Z$_0-9]*)</span><br><span class="line">#Line number is optional in special cases &#x27;Native method&#x27; or &#x27;Unknown source&#x27;</span><br><span class="line">JAVASTACKTRACEPART %&#123;SPACE&#125;at %&#123;JAVACLASS:[java][log][origin][class][name]&#125;\.%&#123;JAVAMETHOD:[log][origin][function]&#125;\(%&#123;JAVAFILE:[log][origin][file][name]&#125;(?::%&#123;INT:[log][origin][file][line]:int&#125;)?\)</span><br><span class="line"># Java Logs</span><br><span class="line">JAVATHREAD (?:[A-Z]&#123;2&#125;-Processor[\d]+)</span><br><span class="line">JAVALOGMESSAGE (?:.*)</span><br><span class="line"></span><br><span class="line"># MMM dd, yyyy HH:mm:ss eg: Jan 9, 2014 7:13:13 AM</span><br><span class="line"># matches default logging configuration in Tomcat 4.1, 5.0, 5.5, 6.0, 7.0</span><br><span class="line">CATALINA7_DATESTAMP %&#123;MONTH&#125; %&#123;MONTHDAY&#125;, %&#123;YEAR&#125; %&#123;HOUR&#125;:%&#123;MINUTE&#125;:%&#123;SECOND&#125; (?:AM|PM)</span><br><span class="line">CATALINA7_LOG %&#123;CATALINA7_DATESTAMP:timestamp&#125; %&#123;JAVACLASS:[java][log][origin][class][name]&#125;(?: %&#123;JAVAMETHOD:[log][origin][function]&#125;)?\s*(?:%&#123;LOGLEVEL:[log][level]&#125;:)? %&#123;JAVALOGMESSAGE:message&#125;</span><br><span class="line"></span><br><span class="line"># 31-Jul-2020 16:40:38.578 in Tomcat 8.5/9.0</span><br><span class="line">CATALINA8_DATESTAMP %&#123;MONTHDAY&#125;-%&#123;MONTH&#125;-%&#123;YEAR&#125; %&#123;HOUR&#125;:%&#123;MINUTE&#125;:%&#123;SECOND&#125;</span><br><span class="line">CATALINA8_LOG %&#123;CATALINA8_DATESTAMP:timestamp&#125; %&#123;LOGLEVEL:[log][level]&#125; \[%&#123;DATA:[java][log][origin][thread][name]&#125;\] %&#123;JAVACLASS:[java][log][origin][class][name]&#125;\.(?:%&#123;JAVAMETHOD:[log][origin][function]&#125;)? %&#123;JAVALOGMESSAGE:message&#125;</span><br><span class="line"></span><br><span class="line">CATALINA_DATESTAMP (?:%&#123;CATALINA8_DATESTAMP&#125;)|(?:%&#123;CATALINA7_DATESTAMP&#125;)</span><br><span class="line">CATALINALOG (?:%&#123;CATALINA8_LOG&#125;)|(?:%&#123;CATALINA7_LOG&#125;)</span><br><span class="line"></span><br><span class="line"># in Tomcat 5.5, 6.0, 7.0 it is the same as catalina.out logging format</span><br><span class="line">TOMCAT7_LOG %&#123;CATALINA7_LOG&#125;</span><br><span class="line">TOMCAT8_LOG %&#123;CATALINA8_LOG&#125;</span><br><span class="line"></span><br><span class="line"># NOTE: a weird log we started with - not sure what TC version this should match out of the box (due the | delimiters)</span><br><span class="line">TOMCATLEGACY_DATESTAMP %&#123;YEAR&#125;-%&#123;MONTHNUM&#125;-%&#123;MONTHDAY&#125; %&#123;HOUR&#125;:%&#123;MINUTE&#125;:%&#123;SECOND&#125;(?: %&#123;ISO8601_TIMEZONE&#125;)?</span><br><span class="line">TOMCATLEGACY_LOG %&#123;TOMCATLEGACY_DATESTAMP:timestamp&#125; \| %&#123;LOGLEVEL:[log][level]&#125; \| %&#123;JAVACLASS:[java][log][origin][class][name]&#125; - %&#123;JAVALOGMESSAGE:message&#125;</span><br><span class="line"></span><br><span class="line">TOMCAT_DATESTAMP (?:%&#123;CATALINA8_DATESTAMP&#125;)|(?:%&#123;CATALINA7_DATESTAMP&#125;)|(?:%&#123;TOMCATLEGACY_DATESTAMP&#125;)</span><br><span class="line"></span><br><span class="line">TOMCATLOG (?:%&#123;TOMCAT8_LOG&#125;)|(?:%&#123;TOMCAT7_LOG&#125;)|(?:%&#123;TOMCATLEGACY_LOG&#125;)</span><br></pre></td></tr></table></figure>

<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/af5eafbf/">https://github.com/maxzhao-it/blog/post/af5eafbf/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/374dd8da/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/374dd8da/" class="post-title-link" itemprop="url">Filebeat-8.11配置采集log4j2日志</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-25 13:55:25" itemprop="dateModified" datetime="2023-11-25T13:55:25+08:00">2023-11-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/ELK/" itemprop="url" rel="index"><span itemprop="name">ELK</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/ELK/Filebeat/" itemprop="url" rel="index"><span itemprop="name">Filebeat</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这里先将日志直接通过 <code>filebeat</code> 输出到文件用于测试</p>
<h2 id="log4j2配置日志输出"><a href="#log4j2配置日志输出" class="headerlink" title="log4j2配置日志输出"></a>log4j2配置日志输出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%d&#123;yyyyMMddHHmmssSSS&#125;:%p [%T] [$&#123;pn&#125;] [%X&#123;cId&#125;] [%X&#123;cpId&#125;] [%X&#123;rTId&#125;] %c&#123;1.&#125;(%L): %m%xwEx%n</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>%X&#123;cId&#125;</code> 在java 中可以使用 <code>ThreadContext.put(&quot;cId&quot;,&quot;test&quot;)</code> 实现</p>
</blockquote>
<h2 id="filebeat-yml-配置"><a href="#filebeat-yml-配置" class="headerlink" title="filebeat.yml 配置"></a><code>filebeat.yml</code> 配置</h2><p>这里输出到日志文件测试</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">filebeat.inputs:</span></span><br><span class="line"><span class="comment"># 新版的日志文件采集，不要使用 log</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">filestream</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">my-filestream-id</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/data/test-log/*.log</span></span><br><span class="line">  <span class="comment">#exclude_lines: [&#x27;^DBG&#x27;]</span></span><br><span class="line">  <span class="comment">#include_lines: [&#x27;^ERR&#x27;, &#x27;^WARN&#x27;]</span></span><br><span class="line">  <span class="attr">prospector.scanner.exclude_files:</span> [<span class="string">&#x27;\.gz$&#x27;</span>]</span><br><span class="line">  <span class="comment">#fields:</span></span><br><span class="line">  <span class="comment">#  level: debug</span></span><br><span class="line">  <span class="comment">#  review: 1</span></span><br><span class="line">  <span class="attr">parsers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">multiline:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">pattern</span></span><br><span class="line">      <span class="comment"># 与模式不匹配的连续行将附加到匹配的上一行</span></span><br><span class="line">      <span class="attr">pattern:</span> <span class="string">&#x27;^\d&#x27;</span></span><br><span class="line">      <span class="attr">negate:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 与模式匹配的连续行将附加到不匹配的上一行，解决日志文件输出到一行的问题</span></span><br><span class="line">      <span class="comment">#pattern: &#x27;^[[:space:]]+(at|\.&#123;3&#125;)[[:space:]]+\b|^[a-z]&#x27;</span></span><br><span class="line">      <span class="comment">#negate: false</span></span><br><span class="line">      <span class="attr">match:</span> <span class="string">after</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">max_lines:</span> <span class="number">100</span></span><br><span class="line"><span class="comment"># ============================== Filebeat modules ==============================</span></span><br><span class="line"><span class="attr">filebeat.config.modules:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">$&#123;path.config&#125;/modules.d/*.yml</span></span><br><span class="line">  <span class="attr">reload.enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 不用es 这里要关闭</span></span><br><span class="line"><span class="attr">setup.template.enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">setup.template.settings:</span></span><br><span class="line">  <span class="attr">index.number_of_shards:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment">#index.codec: best_compression</span></span><br><span class="line">  <span class="comment">#_source.enabled: false</span></span><br><span class="line"><span class="attr">setup.kibana:</span></span><br><span class="line"><span class="comment"># ---------------------------- Elasticsearch Output ----------------------------</span></span><br><span class="line"><span class="attr">output.elasticsearch:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">output.logstash:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hosts:</span> [<span class="string">&quot;127.0.0.1:5044&quot;</span>]</span><br><span class="line">  <span class="attr">compression_level:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">output.file:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&quot;/data/filebeat&quot;</span></span><br><span class="line">  <span class="attr">filename:</span> <span class="string">filebeat</span></span><br><span class="line">  <span class="attr">rotate_every_kb:</span> <span class="number">10240</span></span><br><span class="line">  <span class="comment"># 保留的最多文件个数</span></span><br><span class="line">  <span class="attr">number_of_files:</span> <span class="number">7</span></span><br><span class="line">  <span class="comment"># 文件权限</span></span><br><span class="line">  <span class="attr">permissions:</span> <span class="number">0600</span></span><br><span class="line">  <span class="comment"># 写入文件存在则写入新文件</span></span><br><span class="line">  <span class="attr">rotate_on_startup:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 默认输出 json</span></span><br><span class="line">  <span class="comment">#codec</span></span><br><span class="line"><span class="comment"># ================================= Processors =================================</span></span><br><span class="line"><span class="attr">processors:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_host_metadata:</span></span><br><span class="line">      <span class="attr">when.not.contains.tags:</span> <span class="string">forwarded</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_cloud_metadata:</span> <span class="string">~</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_docker_metadata:</span> <span class="string">~</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">add_kubernetes_metadata:</span> <span class="string">~</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/beats/filebeat/8.11/regexp-support.html"><code>multiline.pattern</code>表达式</a></p>
</blockquote>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/374dd8da/">https://github.com/maxzhao-it/blog/post/374dd8da/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/f7c3a7a/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/f7c3a7a/" class="post-title-link" itemprop="url">Logstash-8.x配置多个pipelines</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-11-25 13:55:32" itemprop="dateModified" datetime="2023-11-25T13:55:32+08:00">2023-11-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/ELK/" itemprop="url" rel="index"><span itemprop="name">ELK</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/logstash/8.11/multiple-pipelines.html">官方文档</a></p>
<p>默认安装路径  <code>/opt/logstash </code> 、 <code>/opt/filebeat </code></p>
</blockquote>
<h2 id="pipelines-yml-配置"><a href="#pipelines-yml-配置" class="headerlink" title="pipelines.yml 配置"></a><code>pipelines.yml</code> 配置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">pipeline.id:</span> <span class="string">my-pipeline_1</span></span><br><span class="line">  <span class="attr">path.config:</span> <span class="string">&quot;/opt/logstash/config/p1.conf&quot;</span></span><br><span class="line">  <span class="attr">pipeline.workers:</span> <span class="number">3</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">pipeline.id:</span> <span class="string">my-other-pipeline</span></span><br><span class="line">  <span class="attr">path.config:</span> <span class="string">&quot;/opt/logstash/config/p2.conf&quot;</span></span><br><span class="line">  <span class="attr">queue.type:</span> <span class="string">persisted</span></span><br></pre></td></tr></table></figure>


<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/f7c3a7a/">https://github.com/maxzhao-it/blog/post/f7c3a7a/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://github.com/maxzhao-it/blog/post/af1c9197/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/uploads/images/avatar.jpg">
      <meta itemprop="name" content="赵联胜">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="maxzhao">
      <meta itemprop="description" content="小码农赵联胜的博客,从遇到Java到爱上Java，工作之余学习Java生态圈中的各种技术。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | maxzhao">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/blog/post/af1c9197/" class="post-title-link" itemprop="url">PVE8安装win11</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-07-17 21:10:18" itemprop="dateModified" datetime="2024-07-17T21:10:18+08:00">2024-07-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog/categories/PVE/" itemprop="url" rel="index"><span itemprop="name">PVE</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>virtio-win-0.1.229.iso<br>Win11_23H2_Chinese_Simplified_x64.iso</p>
<h2 id="上传镜像"><a href="#上传镜像" class="headerlink" title="上传镜像"></a>上传镜像</h2><p>local -&gt; ISO 镜像</p>
<h2 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h2><p>操作系统选择 Microsoft Windows </p>
<p>机型 q35<br>SCSI VirtIO SCSI single<br>BIOS OVMF (UEFI)<br>添加 TMP<br>格式 QEMU映像格式 (qcow2)</p>
<p>磁盘:<br>总线 SCSI<br>缓存 Write back (不安全)<br>格式 QEMU映像格式 (qcow2)<br>SSD 仿真 勾选</p>
<p>CPU：<br>类别 host</p>
<h3 id="添加ISO"><a href="#添加ISO" class="headerlink" title="添加ISO"></a>添加ISO</h3><p>添加 CD</p>
<p>IDE</p>
<p>virtio-win-0.1.229.iso</p>
<h3 id="选项启动顺序"><a href="#选项启动顺序" class="headerlink" title="选项启动顺序"></a>选项启动顺序</h3><p>scsi0  ide0 ide2  不能使用 ide1 </p>
<h2 id="跳过登录"><a href="#跳过登录" class="headerlink" title="跳过登录"></a>跳过登录</h2><p>shift + F10</p>
<p>oobe\bypassnro</p>
<h2 id="win11激活"><a href="#win11激活" class="headerlink" title="win11激活"></a>win11激活</h2><p>windows11激活<br>powershell</p>
<p>irm <a target="_blank" rel="noopener" href="https://massgrave.dev/get">https://massgrave.dev/get</a> | iex<br>选 1</p>
<p>离线的可以下载  MAS <a href="https://link.zhihu.com/?target=https://github.com/massgravel/Microsoft-Activation-Scripts">https://link.zhihu.com/?target=https%3A//github.com/massgravel/Microsoft-Activation-Scripts</a></p>
<h2 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h2><p>virtio-win-0.1.229.iso<br>中的 virtio-gt-6x</p>
<p>本文地址： <a href="https://github.com/maxzhao-it/blog/post/af1c9197/">https://github.com/maxzhao-it/blog/post/af1c9197/</a> </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/blog/page/2/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/blog/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/45/">45</a><a class="extend next" rel="next" href="/blog/page/4/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">赵联胜</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/blog/js/comments.js"></script><script src="/blog/js/utils.js"></script><script src="/blog/js/motion.js"></script><script src="/blog/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/blog/js/third-party/search/local-search.js"></script>




  <script src="/blog/js/third-party/pace.js"></script>

  





</body>
</html>
